// === IWD2 PORT: SHOUT IDS (replacing NEED_* symbols) ===
// 200 = 200
// 201 = 201
// 202 = 202
// 203 = 203
// 204 = 204  // CASTING_DISPEL_MAGIC_ALLY (fallback)
// 205 = 205  // 205 (fallback)
// 206 = 206  // CASTING_BARKSKIN (fallback)

// StringRefs
// 47680 - Melee Attack
// 47681 - Ranged Attack
// 47682 - Run Away
// 47683 - Heal Self
// 47684 - Shout Help
// 47685 - Attack Reevaluate
// 47686 - Drink Antidote
// 47687 - Low HP
// 47688 - Casting Spell
// 47689 - Idle With Enemy
// 47690 - Spell Failed / Aborted
// 47691 - No Valid Target
// 47692 - Cooldown Blocking Action
// 47693 - ClearAllActions Fired
// 47694 - Help: Need Antidote

// TESTING
// //FloatMessage(Myself,103365) // Test

// IF
// 	PartyRested()
// THEN
// 	RESPONSE #100
// 		SetGlobal("c_EfreetiBottle","GLOBAL",1)
// 		SetGlobal("c_BlackSpiderFigurine","GLOBAL",1)
// 		SetGlobal("c_MoonDogFigurine","GLOBAL",1)
// 		SetGlobal("c_GoldenLionFigurine","GLOBAL",1)
// 		SetGlobal("c_HornOfValhalla","GLOBAL",1)
// 		SetGlobal("c_GolemManual","GLOBAL",1)
// 		SetGlobal("c_VhailorsHelm","GLOBAL",1)
// 		SetGlobal("c_HarpOfDiscord","GLOBAL",1)
// 		SetGlobal("c_HarpOfPandemonium","GLOBAL",1)
// 		SetGlobal("c_AzlaersHarp","GLOBAL",1)
// 		SetGlobal("c_MethildsHarp","GLOBAL",1)
// 		SetGlobal("c_staffOfMagi","GLOBAL",1)
// 		SetGlobal("u_useLongSummonSpells","LOCALS",0) // Off
// 		SetGlobal("u_useShortSummonSpells","LOCALS",0) // Off
// 		SetGlobal("u_useItemSummonSpells","LOCALS",0) // Off
// 		SetGlobal("u_healingSpellsOn","LOCALS",0) // Off
// END

IF
	HotKey(U)
	Global("u_useLongSummonSpells","LOCALS",0)
THEN
	RESPONSE #100
		FloatMessage(Myself,16469)  // On
		SetGlobal("u_useLongSummonSpells","LOCALS",1) // On
END

IF
	HotKey(U)
	Global("u_useLongSummonSpells","LOCALS",1)
THEN
	RESPONSE #100
		FloatMessage(Myself,16470)  // Off
		SetGlobal("u_useLongSummonSpells","LOCALS",0) // Off
END

IF
	HotKey(E)
	Global("u_useShortSummonSpells","LOCALS",0)
THEN
	RESPONSE #100
		FloatMessage(Myself,16469)  // On
		SetGlobal("u_useShortSummonSpells","LOCALS",1) // On
END

IF
	HotKey(E)
	Global("u_useShortSummonSpells","LOCALS",1)
THEN
	RESPONSE #100
		FloatMessage(Myself,16470)  // Off
		SetGlobal("u_useShortSummonSpells","LOCALS",0) // Off
END

IF
	HotKey(F)
	Global("u_useItemSummonSpells","LOCALS",0)
THEN
	RESPONSE #100
		FloatMessage(Myself,16469)  // On
		SetGlobal("u_useItemSummonSpells","LOCALS",1) // On
END

IF
	HotKey(F)
	Global("u_useItemSummonSpells","LOCALS",1)
THEN
	RESPONSE #100
		FloatMessage(Myself,16470)  // Off
		SetGlobal("u_useItemSummonSpells","LOCALS",0) // Off
END

IF
	HotKey(T)
	Global("u_healingSpellsOn","LOCALS",0)
THEN
	RESPONSE #100
		FloatMessage(Myself,16469)  // On
		SetGlobal("u_healingSpellsOn","LOCALS",1) // On
END

IF
	HotKey(T)
	Global("u_healingSpellsOn","LOCALS",1)
THEN
	RESPONSE #100
		FloatMessage(Myself,16470)  // Off
		SetGlobal("u_healingSpellsOn","LOCALS",0) // Off
END

////////////////////////////////////////////////////////////////// Cancel Melee If AI Ranged Has Run Out Of Ammo And Can See An Enemy

// AIRanged can sometimes still use melee if their ranged weapon suddenly runs out of ammo and continue to attack the enemy with melee for the rest of the round
// This bit ensures that AIRanged cancel their normal attack if their ranged weapon is out of ammo and don't use melee.
// The HP check allows them to move closer if the enemy if far away but not if they are close by.

// IF
// 	Global("usingNormalAttack","LOCALS",1)
// 	!IsWeaponRanged(Myself)
// 	HPGT(NearestEnemyOf(Myself),0)
// THEN
// 	RESPONSE #100
// 		FloatMessage(Myself,47693) // ClearAllActions Fired
// 		SetGlobal("usingNormalAttack","LOCALS",0)
// 		ClearAllActions()
// 		Continue()
// END

////////////////////////////////////////////////////////////////// Cancel Fireball If Enemy Has Moved Closer
// If casting a fireball and target is within 17ft cancel it
IF
	GlobalTimerNotExpired("castingfireball","LOCALS")
	Range(LastSeenBy(Myself),17)
THEN
	RESPONSE #100
		FloatMessage(Myself,47690) // Spell Failed / Aborted
		SetGlobalTimer("castingfireball","LOCALS",0)
		ClearAllActions()
END

// If casting fireball and target still far away, continue until cast and don't continue with other actions
IF
	GlobalTimerNotExpired("castingfireball","LOCALS")
THEN
	RESPONSE #100
		// Continue with current action
END

////////////////////////////////////////////////////////////////// Status Messages

IF
	!GlobalTimerNotExpired("energyleveldrained","LOCALS")
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Myself,0,LEVELDRAIN)
THEN
	RESPONSE #100
		SetGlobalTimer("energyleveldrained","LOCALS",30)
		//FloatMessage(Myself,103242) // Status: Energy Level Drained
		Continue()
END

IF
	!GlobalTimerNotExpired("fatigued","LOCALS")
	CheckStatGT(Myself,0,FATIGUE)
THEN
	RESPONSE #100
		SetGlobalTimer("fatigued","LOCALS",30)
		//FloatMessage(Myself,103353) // Status: Fatigued
		Continue()
END

////////////////////////////////////////////////////////////////// Take Note Of My Current Weapon So I Can Switch Back To It

//IF
//
//THEN
//	RESPONSE #100
//		
//		//FloatMessage(Myself,10)
//END

// FillSlot(SLOT_WEAPON0) Equips the next available item in your inventory replacing what you currently have equipped and swapping between just those two weapons.

// Note: You can only save to global variables, so we have one variable for each member in your party.
// We save the currently equipped weapon to a variable so you can switch back to it later.
// Only save our weapon if we haven't already switched our weapon.

// Player1
//IF
//	Global("Player1SwitchedWeapon","LOCAL",0) // 0 false, 1 true
//THEN
//	RESPONSE #100
//		SetTokenObject("Player1OriginalWeapon",Myself)
//END
//

//  [EA.GENERAL.RACE.CLASS.SPECIFIC.GENDER.ALIGN]
//  [ALLY.0.0.0.0.SUMMONED.0]



////////////////////////////////////////////////////////////////// If poisoned use an antidote potion
IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	StateCheck(Myself,STATE_POISONED) 
	HasItem("potn20",Myself)  // Antidote
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103243) // Potion: Antidote
		UseItem("potn20",Myself)  // Antidote
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	StateCheck(Myself,STATE_POISONED)
	HasItem("potn17",Myself)  // Elixir of health - cures disease and poisons
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103244) // Potion: Elixir Of Health
		UseItem("potn17",Myself)  // Elixir of health - cures disease and poisons
END

////////////////////////////////////////////////////////////////// Share Antidotes

IF
    StateCheck(Myself,STATE_POISONED)
	!HasItem("potn17",Myself)
    !HasItem("potn20",Myself)
THEN
    RESPONSE #100
		FloatMessage(Myself,47694) // Help: Need Antidote
        Shout(200) // Shout for help
		Continue()
END

IF
    Heard([ANYONE],200) // If someone shouted for help
    !HasItem("potn20",LastHeardBy(Myself))
	!HasItem("potn17",LastHeardBy(Myself))
	HasItem("potn20",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103246) // Giving Antidote
        GiveItem("potn20",LastHeardBy(Myself))
		Continue()
END

IF
    Heard([ANYONE],200) // If someone shouted for help
    !HasItem("potn20",LastHeardBy(Myself))
	!HasItem("potn17",LastHeardBy(Myself))
	HasItem("potn17",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103246) // Giving Antidote
        GiveItem("potn17",LastHeardBy(Myself))
		Continue()
END

////////////////////////////////////////////////////////////////////////////////////// Use Cure Disease Potions

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	StateCheck(Myself,STATE_DISEASED) 
	HasItem("potn17",Myself)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103244) // Potion: Elixir Of Health
		UseItem("potn17",Myself)
END

////////////////////////////////////////////////////////////////////////////////////// Share Cure Disease Potions

IF
    StateCheck(Myself,STATE_DISEASED)
	!HasItem("potn17",Myself)
THEN
    RESPONSE #100
		FloatMessage(Myself,47695) // Help: Need Cure Disease
        Shout(201) // Shout for help
		Continue()
END

IF
    Heard([ANYONE],201) // If someone shouted for help
	!HasItem("potn17",LastHeardBy(Myself))
	HasItem("potn17",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103355) // Giving Elixir Of Health
        GiveItem("potn17",LastHeardBy(Myself))
		Continue()
END

////////////////////////////////////////////////////////////////////////////////////// Buff Potions

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	OR(2)
		HitBy([ENEMY],FIRE)
		HitBy([ENEMY],MAGICFIRE)
	HPLostGT(Myself,25)
	HasItem("potn02",Myself)
	CheckStatLT(Myself,49,RESISTFIRE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103352) // Potion: Fire Resistance
		UseItem("potn02",Myself)
END

IF
	OR(2)
		HitBy([ENEMY],FIRE)
		HitBy([ENEMY],MAGICFIRE)
	HPLostGT(Myself,25)
	!HasItem("potn02",Myself)
	CheckStatLT(Myself,49,RESISTFIRE)
THEN
	RESPONSE #100
		FloatMessage(Myself,47696) // Help: Need Potion Fire Resistance
        Shout(202) // Shout for help
		Continue()
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	OR(2)
		HitBy([ENEMY],COLD)
		HitBy([ENEMY],MAGICCOLD)
	HPLostGT(Myself,25)
	HasItem("potn22",Myself)
	CheckStatLT(Myself,49,RESISTCOLD)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47697) // Potion: Cold Resistance
		UseItem("potn22",Myself)
END

IF
	OR(2)
		HitBy([ENEMY],COLD)
		HitBy([ENEMY],MAGICCOLD)
	HPLostGT(Myself,25)
	!HasItem("potn22",Myself)
	CheckStatLT(Myself,49,RESISTCOLD)
THEN
	RESPONSE #100
		FloatMessage(Myself,47698) // Help: Need Potion Cold Resistance
        Shout(203) // Shout for help
		Continue()
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HitBy([ENEMY],ELECTRICITY)
	HPLostGT(Myself,25)
	HasItem("potn31",Myself)
	CheckStatLT(Myself,49,RESISTELECTRICITY)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103348) // Potion: Insulation
		UseItem("potn31",Myself)
END

IF
	HitBy([ENEMY],ELECTRICITY)
	HPLostGT(Myself,25)
	!HasItem("potn31",Myself)
	CheckStatLT(Myself,49,RESISTELECTRICITY)
THEN
	RESPONSE #100
		FloatMessage(Myself,47699) // Help: Need Potion Insulation
        Shout(204) // Shout for help
		Continue()
END

//////////////////////////////////////////////////////////////////// Share Buff Potions

IF
	ActionListEmpty()
    Heard([ANYONE],202) // If someone shouted for help
    !HasItem("potn02",LastHeardBy(Myself))
	HasItem("potn02",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103346) // Giving Potion Fire Resistance
        GiveItem("potn02",LastHeardBy(Myself))
		Continue()
END

IF
	ActionListEmpty()
    Heard([ANYONE],203) // If someone shouted for help
    !HasItem("potn22",LastHeardBy(Myself))
	HasItem("potn22",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103345) // Giving Potion Cold Resistance
        GiveItem("potn22",LastHeardBy(Myself))
		Continue()
END

IF
	ActionListEmpty()
    Heard([ANYONE],204) // If someone shouted for help
    !HasItem("potn31",LastHeardBy(Myself))
	HasItem("potn31",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103344) // Giving Potion Insulation
        GiveItem("potn31",LastHeardBy(Myself))
		Continue()
END

////////////////////////////////////////////////////////////////////////////////////// Spell Shields

// Level 3
// 3 Rounds/Level (18 seconds/level) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MINOR_GLOBE_OF_INVULNERABILITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Myself,1,WIZARD_SPELL_DEFLECTION)

	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103272) // Spell: Minor Spell Deflection
		Spell(Myself,WIZARD_MINOR_GLOBE_OF_INVULNERABILITY)
END

////////////////////////////////////////////////////////////////////////////////////// Scrolls: Spell Shields

// Level 3
// 3 Rounds/Level (18 seconds/level) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL6G",Myself)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Myself,1,WIZARD_SPELL_DEFLECTION)

	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103272) // Spell: Minor Spell Deflection
		UseItem("SCRL6G",Myself)
END

// Level 5
// 3 Rounds/Level (18 seconds/level) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL7D",Myself)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Myself,1,WIZARD_SPELL_TURNING)

	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103357) // Spell: Minor Spell Turning
		UseItem("SCRL7D",Myself)
END

// Level 4
// 1 Round/Level (6 seconds/level) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL1Z",Myself)
	!CheckStat(Myself,1,MINORGLOBE)

	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103273) // Spell: Minor Globe Of Invulnerability
		UseItem("SCRL1Z",Myself)
END

/////////////////////////////////////////////////////////////////////////////////////// Stoneskins

// Level 4
// 600 Rounds (1 Hour) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_STONESKIN)
	!CheckSpellState(Player1,STONESKIN)
	!CheckStatGT(Player1,0,STONESKINS)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103275) // Spell: Stoneskin
		Spell(Player1,WIZARD_STONESKIN)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_STONESKIN)
	!CheckSpellState(Myself,STONESKIN)
	!CheckStatGT(Myself,0,STONESKINS)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103275) // Spell: Stoneskin
		Spell(Myself,WIZARD_STONESKIN)
END

// Level 5
// 600 rounds (1 Hour) - Self
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_IRON_SKINS)
	!CheckSpellState(Myself,IRON_SKINS)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103292) // Spell: Iron Skins
		Spell(Myself,CLERIC_IRON_SKINS)
END

/////////////// Bard Song Fear Counter
IF
    ActionListEmpty()
    CheckStatGT(Myself,0,CLASSLEVELBARD)
    CheckStatLT(Myself,20,CLASSLEVELBARD)
    See(Player1)
    OR(6)
        OR(2)
            StateCheck(Player1,STATE_PANIC)
            CheckSpellState(Player1,HOPELESSNESS)
        OR(2)
            StateCheck(Player2,STATE_PANIC)
            CheckSpellState(Player2,HOPELESSNESS)
        OR(2)
            StateCheck(Player3,STATE_PANIC)
            CheckSpellState(Player3,HOPELESSNESS)
        OR(2)
            StateCheck(Player4,STATE_PANIC)
            CheckSpellState(Player4,HOPELESSNESS)
        OR(2)
            StateCheck(Player5,STATE_PANIC)
            CheckSpellState(Player5,HOPELESSNESS)
        OR(2)
            StateCheck(Player6,STATE_PANIC)
            CheckSpellState(Player6,HOPELESSNESS)
THEN
    RESPONSE #100
        PlayBardSong(THE_TALE_OF_CURRAN_STRONGHEART)
END

//////////////////////////////////////////////////////////////////// If ally health is low and have heal spell, heal them
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	
	Global("u_healingSpellsOn","LOCALS",1)

	HaveSpell(CLERIC_CURE_LIGHT_WOUNDS)
	HPPercentLT(MostDamagedOf(Myself),80)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103343) // Spell: Cure Light Wounds
		Spell(MostDamagedOf(Myself),CLERIC_CURE_LIGHT_WOUNDS)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")

	Global("u_healingSpellsOn","LOCALS",1)

	HaveSpell(CLERIC_CURE_MODERATE_WOUNDS)
	HPPercentLT(MostDamagedOf(Myself),80) 

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103342) // Spell: Cure Medium Wounds
		Spell(MostDamagedOf(Myself),CLERIC_CURE_MODERATE_WOUNDS)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")

	Global("u_healingSpellsOn","LOCALS",1)

	HaveSpell(CLERIC_CURE_SERIOUS_WOUNDS)
	HPPercentLT(MostDamagedOf(Myself),75)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103341) // Spell: Cure Serious Wounds
		Spell(MostDamagedOf(Myself),CLERIC_CURE_SERIOUS_WOUNDS)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")

	Global("u_healingSpellsOn","LOCALS",1)

	HaveSpell(CLERIC_CURE_CRITICAL_WOUNDS)
	HPPercentLT(MostDamagedOf(Myself),70)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103363) // Spell: Cure Critical Wounds
		Spell(MostDamagedOf(Myself),CLERIC_CURE_CRITICAL_WOUNDS)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")

	Global("u_healingSpellsOn","LOCALS",1)

	HaveSpell(CLERIC_MASS_CURE)  // SPPR514.SPL (Mass Cure)
	HPPercentLT(MostDamagedOf(Myself),70)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103340) // Spell: Mass Cure
		Spell(MostDamagedOf(Myself),CLERIC_MASS_CURE)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")

	Global("u_healingSpellsOn","LOCALS",1)

	HaveSpell(CLERIC_HEALING_CIRCLE)  // SPPR514.SPL (Mass Cure)
	HPPercentLT(MostDamagedOf(Myself),70)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(MostDamagedOf(Myself),CLERIC_HEALING_CIRCLE)
END

/////////////////////////////////////////////////////////////////// If health is low use a healing potion

// check hp < maxhp - 40
// per = hp/maxhp*100
// hp > 40*per/(100-per)
// if per < x and hp > 40*x/(100-x)

// Potion 55 - Potion Of Superior Healing
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,10) 
	HPGT(Myself,4)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,20) 
	HPGT(Myself,10)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,30) 
	HPGT(Myself,17)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,40) 
	HPGT(Myself,27)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,50) 
	HPGT(Myself,40)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,60) 
	HPGT(Myself,60)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,70) 
	HPGT(Myself,93)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn55",Myself)  // Potion of Superior Healing
	HPPercentLT(Myself,80) 
	HPGT(Myself,160)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn55",Myself)  // Potion of Superior Healing
END

// check hp < maxhp - 27
// per = hp/maxhp*100
// hp > 27*per/(100-per)
// if per < x and hp > 27*x/(100-x)

// Potion 52 - Potion Of Extra Healing

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn52",Myself)  // Potion of Extra Healing
	HPPercentLT(Myself,10) 
	HPGT(Myself,3)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103339) // Potion: Extra Healing
		UseItem("potn52",Myself)  // Potion of Extra Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn52",Myself)  // Potion of Extra Healing
	HPPercentLT(Myself,20) 
	HPGT(Myself,7)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103339) // Potion: Extra Healing
		UseItem("potn52",Myself)  // Potion of Extra Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn52",Myself)  // Potion of Extra Healing
	HPPercentLT(Myself,30) 
	HPGT(Myself,12)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103339) // Potion: Extra Healing
		UseItem("potn52",Myself)  // Potion of Extra Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn52",Myself)  // Potion of Extra Healing
	HPPercentLT(Myself,40) 
	HPGT(Myself,18)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103339) // Potion: Extra Healing
		UseItem("potn52",Myself)  // Potion of Extra Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn52",Myself)  // Potion of Extra Healing
	HPPercentLT(Myself,50) 
	HPGT(Myself,27)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103339) // Potion: Extra Healing
		UseItem("potn52",Myself)  // Potion of Extra Healing
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn52",Myself)  // Potion of Extra Healing
	HPPercentLT(Myself,60) 
	HPGT(Myself,41)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103339) // Potion: Extra Healing
		UseItem("potn52",Myself)  // Potion of Extra Healing
END

// check hp <= maxhp - 9
// per = hp/maxhp*100
// hp >= 9*per/(100-per)
// if per < x and hp > 9*x/(100-x)

// Potion 8 - Potion Of Healing

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,10) 
	HPGT(Myself,1)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,20) 
	HPGT(Myself,2)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,30) 
	HPGT(Myself,4)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,40) 
	HPGT(Myself,6)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,50) 
	HPGT(Myself,9)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,60) 
	HPGT(Myself,14)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn08",Myself)  // Potion of Healing
	HPPercentLT(Myself,70) 
	HPGT(Myself,21)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn08",Myself)  // Potion of Healing
END

// Potion 25 - Potion Of Healing

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,10) 
	HPGT(Myself,1)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,20) 
	HPGT(Myself,2)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,30) 
	HPGT(Myself,4)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,40) 
	HPGT(Myself,6)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,50) 
	HPGT(Myself,9)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,60) 
	HPGT(Myself,14)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("potn25",Myself)  // Potion of Healing
	HPPercentLT(Myself,70) 
	HPGT(Myself,21)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103338) // Potion: Healing
		UseItem("potn25",Myself)  // Potion of Healing
END

////////////////////////////////////////////////////////////////// Share Healing Potions

IF
	ActionListEmpty()
    !HasItem("potn08",Myself)
    HPPercentLT(Myself,50)
THEN
    RESPONSE #100
		FloatMessage(Myself,47700) // Help: Need Potion Of Healing
        Shout(205) // Shout for help
		Continue()
END

IF
	ActionListEmpty()
    Heard([ANYONE],205) // If someone shouted for help
    !HasItem("potn08",LastHeardBy(Myself))
	HasItem("potn08",Myself)
THEN
    RESPONSE #100
		//FloatMessage(Myself,103336) // Giving Healing Potion
        GiveItem("potn08",LastHeardBy(Myself)) // Pass them the item
		Continue()
END

//////////////////////////////////////////////////////////////// Healing Scrolls

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL56",Myself)
	HPPercentLT(MostDamagedOf(Myself),70)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		UseItem("SCRL56",MostDamagedOf(Myself))
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL61",Myself)
	HPPercentLT(MostDamagedOf(Myself),70)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103364) // Scroll: Cure Critical Wounds
		UseItem("SCRL61",MostDamagedOf(Myself))
END

//////////////////////////////////////////////////////////////// Restoration Spells
// Restoration spells undo level drain

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_LESSER_RESTORATION)
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Player1,0,LEVELDRAIN)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		Spell(Player1,CLERIC_LESSER_RESTORATION)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_LESSER_RESTORATION)
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Player2,0,LEVELDRAIN)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		Spell(Player2,CLERIC_LESSER_RESTORATION)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_LESSER_RESTORATION)
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Player3,0,LEVELDRAIN)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		Spell(Player3,CLERIC_LESSER_RESTORATION)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_LESSER_RESTORATION)
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Player4,0,LEVELDRAIN)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		Spell(Player4,CLERIC_LESSER_RESTORATION)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_LESSER_RESTORATION)
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Player5,0,LEVELDRAIN)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		Spell(Player5,CLERIC_LESSER_RESTORATION)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_LESSER_RESTORATION)
// [IWD2 PORT] commented: LEVELDRAIN not in STATS.IDS; consider CheckSpellState(...,ENERGY_DRAINED)
// 	CheckStatGT(Player6,0,LEVELDRAIN)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		Spell(Player6,CLERIC_LESSER_RESTORATION)
END

//////////////////////////////////////////////////////////////// Run away from nearby enemies if health is low
// If an enemy is nearby and the same location timer isn't running, then start the timer and run away
IF 
	ActionListEmpty()
	!GlobalTimerExpired("locMeSame","LOCALS")
	!GlobalTimerNotExpired("locMeSame","LOCALS")
	Range(NearestEnemyOf(Myself),5)
THEN
	RESPONSE #100
		FloatMessage(Myself,47682) // Run Away
		SetGlobalTimer("locMeSame","LOCALS",3)
		RunAwayFrom(NearestEnemyOf(Myself),20)
END

IF 
	ActionListEmpty()
	!GlobalTimerExpired("locMeSame","LOCALS")
	!GlobalTimerNotExpired("locMeSame","LOCALS")
	Range(NearestEnemyOf(Myself),10)
THEN
	RESPONSE #100
		FloatMessage(Myself,47682) // Run Away
		SetGlobalTimer("locMeSame","LOCALS",3)
		RunAwayFrom(NearestEnemyOf(Myself),25)
END

// If an enemy is nearby and the same location timer is running but hasn't expired, then run away
IF 
	ActionListEmpty()
	GlobalTimerNotExpired("locMeSame","LOCALS")
	Range(NearestEnemyOf(Myself),5)
THEN
	RESPONSE #100
		FloatMessage(Myself,47682) // Run Away
		RunAwayFrom(NearestEnemyOf(Myself),15)
END

// If an enemy is nearby and the same location timer has expired (have been in the same spot for a while), continue with normal actions and attack

////////////////////////////////////////////////////////////////////////////////////// Counter Silence

// Level 2 - Abjuration 1
// 10 rounds (60 seconds) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_VOCALIZE)
	StateCheck(Myself,STATE_SILENCED)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103372) // Spell: Vocalize
		Spell(Myself,WIZARD_VOCALIZE)
END

/////////////////////////////////////////////////////////////////////////////////////// Simulacrum And Projected Image

/////////////////////////////////////////////////////////////////////////////////////// Prevent Summons Being Dispelled

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
// IF
// 	ActionListEmpty()
// 	OR(2)
// 		CheckStat(Myself,1,AURACLEANSING)
// 		!GlobalTimerNotExpired("castnattack","LOCALS")
// 	HaveSpell(WIZARD_PROTECTION_FROM_THE_ELEMENTS)
// 	// [IWD2 PORT] removed coordination: !CheckStatGT(NearestMyGroupOfType([GOODCUTOFF.0.0.0.0.SUMMONED]),0,WIZARD_PROTECTION_FROM_THE_ELEMENTS)
// 	// [IWD2 PORT] removed coordination: CheckStatLT(NearestMyGroupOfType([GOODCUTOFF.0.0.0.0.SUMMONED]),99,RESISTMAGIC)
// 	// [IWD2 PORT] removed coordination: !Heard([ANYONE],CASTING_PROTECTION_FROM_MAGIC_ENERGY) // If someone else casting protection from magic energy

// 	// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// 	!StateCheck(Myself,STATE_SILENCED)
// 	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
// THEN
// 	RESPONSE #100
// 		SetGlobalTimer("castnattack","LOCALS",6)
// 		// [IWD2 PORT] removed coordination: Shout(CASTING_PROTECTION_FROM_MAGIC_ENERGY)
// 		FloatMessage(Myself,47688) // Casting Spell
// 		// [IWD2 PORT] removed coordination: Spell(NearestMyGroupOfType([GOODCUTOFF.0.0.0.0.SUMMONED]),WIZARD_PROTECTION_FROM_THE_ELEMENTS)
// END

////////////////////////////////////////////////////////////////////////////// Short Duration Summon spells

IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_MONSTER_VI)

	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_SUMMON_MONSTER_VI)
END

IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_MONSTER_V)

	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_SUMMON_MONSTER_V)
END

IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_MONSTER_IV)

	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_SUMMON_MONSTER_IV)
END

IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_MONSTER_III)

	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_SUMMON_MONSTER_III)
END

IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_MONSTER_II)

	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_SUMMON_MONSTER_II)
END

IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_MONSTER_I)

	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_SUMMON_MONSTER_I)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.PLANATAR],0)
	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.SOLAR],0)
	// [IWD2 PORT] removed coordination: NumCreature([GOODCUTOFF.0.ANTISOLAR.0.0.SUMMONED],0)
	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MONSTER_SUMMONING_VI)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_MONSTER_SUMMONING_VI)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.PLANATAR],0)
	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.SOLAR],0)
	// [IWD2 PORT] removed coordination: NumCreature([GOODCUTOFF.0.ANTISOLAR.0.0.SUMMONED],0)
	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_8)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_8)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.PLANATAR],0)
	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.DARKPLANATAR],0)
	// [IWD2 PORT] commented: planar race token not in RACE.IDS
	// NumCreature([GOODCUTOFF.0.SOLAR],0)
	// [IWD2 PORT] removed coordination: NumCreature([GOODCUTOFF.0.ANTISOLAR.0.0.SUMMONED],0)
	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_8)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_8)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	// [IWD2 PORT] removed empty OR block: OR(0)
	CheckStat(Myself,1,AURACLEANSING)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_8)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_8)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	// [IWD2 PORT] removed empty OR block: OR(0)
	CheckStat(Myself,1,AURACLEANSING)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_ELEMENTAL_SWARM)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,CLERIC_ELEMENTAL_SWARM)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	// [IWD2 PORT] removed empty OR block: OR(0)
	CheckStat(Myself,1,AURACLEANSING)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MORDENKAINENS_SWORD)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_MORDENKAINENS_SWORD)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	// [IWD2 PORT] removed empty OR block: OR(0)
	CheckStat(Myself,1,AURACLEANSING)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_WYVERN_CALL)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_WYVERN_CALL)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CONJURE_ANIMALS)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103308) // Spell: Conjure Animals
		Spell(Myself,CLERIC_CONJURE_ANIMALS)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_6)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103312) // Spell: Call Woodland Beings
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_6)
END

//IF
//	ActionListEmpty()

//	Global("u_useShortSummonSpells","LOCALS",1)
//	!Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

//	NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
  //  !GlobalTimerNotExpired("castnattack","LOCALS")
//	HaveSpell(TOTEMIC_DRUID_SUMMON_SPIRIT_ANIMAL)

//	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
//	!StateCheck(Myself,STATE_SILENCED)
//	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
//THEN
//	RESPONSE #100
  //      SetGlobalTimer("castnattack","LOCALS",6)
//		Shout(SUMMONING_CREATURE) // Summoning Creature
//FloatMessage(Myself,47688) // Casting Spell
//		Spell(Myself,TOTEMIC_DRUID_SUMMON_SPIRIT_ANIMAL)
//END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_7)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103311) // Spell: Animal Summoning 3
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_7)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_6)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103310) // Spell: Animal Summoning 2
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_6)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_5)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103309) // Spell: Animal Summoning 1
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_5)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DEMI_SHADOW_MONSTERS)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103309) // Spell: Animal Summoning 1
		Spell(Myself,WIZARD_DEMI_SHADOW_MONSTERS)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SUMMON_SHADOW)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103309) // Spell: Animal Summoning 1
		Spell(Myself,WIZARD_SUMMON_SHADOW)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MONSTER_SUMMONING_IV)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103309) // Spell: Animal Summoning 1
		Spell(Myself,WIZARD_MONSTER_SUMMONING_IV)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SPIDER_SPAWN)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103309) // Spell: Animal Summoning 1
		Spell(Myself,WIZARD_SPIDER_SPAWN)
END

/////////////////////////////////////////////////////////////////////////////////////// Long Duration Summon spells

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useLongSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUMMON_NATURES_ALLY_8)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,CLERIC_SUMMON_NATURES_ALLY_8)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useLongSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_ANIMATE_DEAD)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103313) // Spell: Animate Undead
		Spell(Myself,CLERIC_ANIMATE_DEAD)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useLongSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_ANIMATE_DEAD)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103313) // Spell: Animate Undead
		Spell(Myself,WIZARD_ANIMATE_DEAD)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useLongSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CONJURE_EARTH_ELEMENTAL)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,CLERIC_CONJURE_EARTH_ELEMENTAL)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useLongSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CONJURE_FIRE_ELEMENTAL)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103307) // Spell: Conjure Fire Elemental
		Spell(Myself,CLERIC_CONJURE_FIRE_ELEMENTAL)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useLongSummonSpells","LOCALS",1)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],SUMMONING_CREATURE) // If someone else summoning a creature

	// [IWD2 PORT] removed coordination: NumCreatureLT([GOODCUTOFF.0.0.0.0.SUMMONED],5)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_CONJURE_FIRE_ELEMENTAL)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(SUMMONING_CREATURE) // Summoning Creature
		//FloatMessage(Myself,103307) // Spell: Conjure Fire Elemental
		Spell(Myself,WIZARD_CONJURE_FIRE_ELEMENTAL)
END

////////////////////////////////////////////////////////////////////////////// Item Summons

////////////////////////////////////////////////////////////////////////////////// Scrolls: Summoning Spells

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)

	// [IWD2 PORT] removed coordination: !HPGT(FifthNearestMyGroupOfType([ALLY.0.0.0.0.SUMMONED.0]),0)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL1L",Myself)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103367) // Spell: Monster Summoning 1
		UseItem("SCRL1L",Myself)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)

	// [IWD2 PORT] removed coordination: !HPGT(FifthNearestMyGroupOfType([ALLY.0.0.0.0.SUMMONED.0]),0)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL2A",Myself)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103368) // Spell: Monster Summoning 2
		UseItem("SCRL2A",Myself)
END

// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()

	Global("u_useShortSummonSpells","LOCALS",1)

	// [IWD2 PORT] removed coordination: !HPGT(FifthNearestMyGroupOfType([ALLY.0.0.0.0.SUMMONED.0]),0)
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL2G",Myself)

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103369) // Spell: Monster Summoning 3
		UseItem("SCRL2G",Myself)
END

////////////////////////////////////////////////////////////////////////////////////// Debuff/Control Spells
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_NEUTRALIZE_POISON)  // SPPR318.SPL (Zone of Sweet Air)
// OR(11)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_INCENDIARY_CLOUD)  // SPWI810.SPL (Incendiary Cloud)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_STINKING_CLOUD)  // SPWI213.SPL (Stinking Cloud)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_CLOUDKILL)  // SPWI502.SPL (Cloudkill)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_DEATH_FOG)  // SPWI614.SPL (Death Fog)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_INCENDIARY_CLOUD)  // SPWI810.SPL (Incendiary Cloud)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_STINKING_CLOUD)  // SPWI213.SPL (Stinking Cloud)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_CLOUDKILL)  // SPWI502.SPL (Cloudkill)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],WIZARD_DEATH_FOG)  // SPWI614.SPL (Death Fog)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],CLERIC_WRITHING_FOG)  // SPPR250.SPL (Writhing Fog)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],TRAP_STINKING_CLOUD)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([ANYONE],TRAP_CLOUDKILL)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103334) // Spell: Zone Of Sweet Air
		Spell(Myself,CLERIC_NEUTRALIZE_POISON)
END

// Level 2 - Alteration
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SILENCE_15_RADIUS)  // SPPR211.SPL (Silence, 15' Radius)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	!StateCheck(LastSeenBy(Myself),STATE_SILENCED)
	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),2)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103333) // Spell: Silence
		Spell(LastSeenBy(Myself),CLERIC_SILENCE_15_RADIUS)  // SPPR211.SPL (Silence, 15' Radius)
END

// Level 6 - Abjuration 1
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	See(NearestEnemyOf(Myself))
	OR(2)
		CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),2,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),3,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),5,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
		CheckStatGT(LastSeenBy(Myself),25,RESISTMAGIC)

// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),6)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103371) // Spell: Pierce Magic
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

// Level 5 - Abjuration 1
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_LOWER_RESISTANCE)
	See(NearestEnemyOf(Myself))

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)

// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),5)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatGT(LastSeenBy(Myself),35,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103332) // Spell: Lower Resistance
		Spell(LastSeenBy(Myself),WIZARD_LOWER_RESISTANCE)
END

// Level 4 - Abjuration
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(1)
		CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),4)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103331) // Spell: Secret Word
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

// Level 2 - Divination
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DETECT_INVISIBILITY)
// OR(2)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([EVILCUTOFF],WIZARD_INVISIBILITY)
// [IWD2 PORT] commented: SpellCast() trigger not in IWD2 TRIGGER.IDS
// 		SpellCast([EVILCUTOFF],WIZARD_IMPROVED_INVISIBILITY)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastTrigger,2)
	!CheckStat(LastTrigger,1,MINORGLOBE)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastTrigger,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastTrigger,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastTrigger,3,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103330) // Spell: Detect Invisibility
		Spell(Myself,WIZARD_DETECT_INVISIBILITY)
END

// Level 2 - Enchantment
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_HOLD_PERSON)
	See([EVILCUTOFF.HUMANOID])
	!CheckSpellState(LastSeenBy(Myself),HELD)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),2)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),INQUISITOR)
// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),UNDEADHUNTER)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)



	!HasItem("MORSWORD",LastSeenBy(Myself))  // Mordenkainen's Sword
	!HasItem("RING09",LastSeenBy(Myself))  // Edventar's Gift

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103328) // Spell: Hold Person
		Spell(LastSeenBy(Myself),CLERIC_HOLD_PERSON)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_HOLD_UNDEAD)
	General(NearestEnemyOf(Myself),UNDEAD)

	!CheckSpellState(LastSeenBy(Myself),HELD)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),INQUISITOR)
// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),UNDEADHUNTER)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)
	!HasItem("MORSWORD",LastSeenBy(Myself))  // Mordenkainen's Sword
	!HasItem("RING09",LastSeenBy(Myself))  // Edventar's Gift

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103328) // Spell: Hold Person
		Spell(LastSeenBy(Myself),WIZARD_HOLD_UNDEAD)
END

// Level 1 - Enchantment
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SLEEP)
	See([EVILCUTOFF.HUMANOID])
	!StateCheck(LastSeenBy(Myself),STATE_SLEEPING)
	!CheckSpellState(LastSeenBy(Myself),HELD)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),1)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),INQUISITOR)
// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),UNDEADHUNTER)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)



	!HasItem("MORSWORD",LastSeenBy(Myself))  // Mordenkainen's Sword
	!HasItem("RING09",LastSeenBy(Myself))  // Edventar's Gift

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103329) // Spell: Sleep
		Spell(LastSeenBy(Myself),WIZARD_SLEEP)
END


// Level 3 - Enchantment
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_HOLD_PERSON)
	See([EVILCUTOFF.HUMANOID])
	!CheckSpellState(LastSeenBy(Myself),HELD)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),INQUISITOR)
// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),UNDEADHUNTER)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)



	!HasItem("MORSWORD",LastSeenBy(Myself))  // Mordenkainen's Sword
	!HasItem("RING09",LastSeenBy(Myself))  // Edventar's Gift

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103328) // Spell: Hold Person
		Spell(LastSeenBy(Myself),WIZARD_HOLD_PERSON)
END

// Level 5 - Enchantment
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_HOLD_MONSTER)
	See(NearestEnemyOf(Myself))
	!CheckSpellState(LastSeenBy(Myself),HELD)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),5)
	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),INQUISITOR)
// [IWD2 PORT] commented: kit constant not in KIT.IDS
// 	!Kit(LastSeenBy(Myself),UNDEADHUNTER)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)



	!HasItem("MORSWORD",LastSeenBy(Myself))  // Mordenkainen's Sword
	!HasItem("RING09",LastSeenBy(Myself))  // Edventar's Gift

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103327) // Spell: Hold Monster
		Spell(LastSeenBy(Myself),WIZARD_HOLD_MONSTER)
END

// Level 5 - Enchantment
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_CHAOS)  // SPPR211.SPL (Silence, 15' Radius)
// [IWD2 PORT] commented: NumCreatureVsPartyGT() not in IWD2 TRIGGER.IDS
// 	NumCreatureVsPartyGT(Myself,3)


// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(NearestEnemyOf(Myself),5)
	CheckStatLT(NearestEnemyOf(Myself),75,RESISTMAGIC)	
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(NearestEnemyOf(Myself),5,SAVEVSSPELL)


// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(SecondNearestEnemyOf(Myself),5)
	CheckStatLT(SecondNearestEnemyOf(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(SecondNearestEnemyOf(Myself),5,SAVEVSSPELL)


// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(ThirdNearestEnemyOf(Myself),5)
	CheckStatLT(ThirdNearestEnemyOf(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(ThirdNearestEnemyOf(Myself),5,SAVEVSSPELL)


// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FourthNearestEnemyOf(Myself),5)
	CheckStatLT(FourthNearestEnemyOf(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(FourthNearestEnemyOf(Myself),5,SAVEVSSPELL)

	See(NearestEnemyOf(Myself))

	!StateCheck(NearestEnemyOf(Myself),STATE_INVISIBLE)
	!StateCheck(NearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103326) // Spell: Chaos
		Spell(LastSeenBy(Myself),WIZARD_CHAOS)
END

// Level 2 - Necromancy
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_HORROR)
// [IWD2 PORT] commented: NumCreatureVsPartyGT() not in IWD2 TRIGGER.IDS
// 	NumCreatureVsPartyGT(Myself,4)

	!StateCheck(NearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(NearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(NearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(NearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(NearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(NearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(NearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(NearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(NearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(NearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(SecondNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(SecondNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(SecondNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(SecondNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(SecondNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(SecondNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(SecondNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(SecondNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(SecondNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(SecondNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(ThirdNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(ThirdNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(ThirdNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(ThirdNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(ThirdNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(ThirdNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(ThirdNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(ThirdNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(ThirdNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(FourthNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(FourthNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FourthNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(FourthNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(FourthNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(FourthNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FourthNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FourthNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(FourthNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(FourthNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(FifthNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(FifthNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FifthNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(FifthNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(FifthNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(FifthNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FifthNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FifthNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(FifthNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(FifthNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(NearestEnemyOf(Myself),STATE_INVISIBLE)
	!StateCheck(NearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf(Myself),STATE_NOT_TARGETABLE)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf(Myself),1,HELD)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103325) // Spell: Horror
		Spell(NearestEnemyOf(Myself),WIZARD_HORROR)
END


// Dispel Magic On Enemies
//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// [IWD2 PORT] HaveSpell(WIZARD_BREACH)  // Breach not found in IWD2 SPELL.IDS
	//OR(4)
		//See(NearestEnemyOf([0.0.0.BARD_ALL]))
		//See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		//See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		//See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	//OR(11)

		//CheckStatGT(LastSeenBy(Myself),0,SHIELDGLOBE)
		//CheckStatGT(LastSeenBy(Myself),0,MINORGLOBE)
		//CheckSpellState(LastSeenBy(Myself),HASTE)
		//CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		// [IWD2 PORT] commented: TRUE_SIGHT not in SPLSTATE.IDS
		// 	CheckSpellState(LastSeenBy(Myself),TRUE_SIGHT)
		//CheckSpellState(LastSeenBy(Myself),DEFENSIVE_HARMONY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)
		// [IWD2 PORT] commented: FIRE_SHIELD not in SPLSTATE.IDS
		// 	CheckSpellState(LastSeenBy(Myself),FIRE_SHIELD)
		//CheckSpellState(LastSeenBy(Myself),DEATH_WARD)
		// [IWD2 PORT] commented: CheckStatGT(LastSeenBy(Myself),0,DEFENSIVE_MODIFIER)  // no direct IWD2 stat replacement
		//CheckStatGT(LastSeenBy(Myself),0,STR)
		// [IWD2 PORT] commented: PROTECTION_FROM_MAGIC_WEAPONS not in SPLSTATE.IDS
		// 	CheckSpellState(LastSeenBy(Myself),PROTECTION_FROM_MAGIC_WEAPONS)







		//StateCheck(LastSeenBy(Myself),STATE_HASTED)
		//StateCheck(LastSeenBy(Myself),STATE_BLESS)
		// [IWD2 PORT] commented: STATE_DRAWUPONHOLYMIGHT not in STATE.IDS
		// 	StateCheck(LastSeenBy(Myself),STATE_DRAWUPONHOLYMIGHT)
		//StateCheck(LastSeenBy(Myself),STATE_BLUR)
		//StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
	//!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),5)

	//!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	//!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
	//CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	//!InParty(LastSeenBy(Myself))
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103324) // Spell: Breach
		// [IWD2 PORT] Spell(LastSeenBy(Myself),WIZARD_BREACH)  // Breach not found in IWD2 SPELL.IDS
//END

// Wizard True Dispel Magic = Dispel Magic
// Dispel Magic On Allies
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player1,HOPELESSNESS)
		CheckSpellState(Player1,ENFEEBLED)
		CheckSpellState(Player1,HELD)
		CheckSpellState(Player1,ENTANGLE)
		CheckSpellState(Player1,WEB)
		CheckSpellState(Player1,DOOM)
		CheckSpellState(Player1,MISCAST_MAGIC)
		StateCheck(Player1,STATE_PANIC)
		StateCheck(Player1,STATE_CHARMED)
		StateCheck(Player1,STATE_CONFUSED)
		StateCheck(Player1,STATE_SLEEPING)
		StateCheck(Player1,STATE_SLOWED)
		StateCheck(Player1,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player1,0,CLERIC_INSECT_PLAGUE)
	See(Player1)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player2,HOPELESSNESS)
		CheckSpellState(Player2,ENFEEBLED)
		CheckSpellState(Player2,HELD)
		CheckSpellState(Player2,ENTANGLE)
		CheckSpellState(Player2,WEB)
		CheckSpellState(Player2,DOOM)
		CheckSpellState(Player2,MISCAST_MAGIC)
		StateCheck(Player2,STATE_PANIC)
		StateCheck(Player2,STATE_CHARMED)
		StateCheck(Player2,STATE_CONFUSED)
		StateCheck(Player2,STATE_SLEEPING)
		StateCheck(Player2,STATE_SLOWED)
		StateCheck(Player2,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player2,0,CLERIC_INSECT_PLAGUE)
	See(Player2)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player3,HOPELESSNESS)
		CheckSpellState(Player3,ENFEEBLED)
		CheckSpellState(Player3,HELD)
		CheckSpellState(Player3,ENTANGLE)
		CheckSpellState(Player3,WEB)
		CheckSpellState(Player3,DOOM)
		CheckSpellState(Player3,MISCAST_MAGIC)
		StateCheck(Player3,STATE_PANIC)
		StateCheck(Player3,STATE_CHARMED)
		StateCheck(Player3,STATE_CONFUSED)
		StateCheck(Player3,STATE_SLEEPING)
		StateCheck(Player3,STATE_SLOWED)
		StateCheck(Player3,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player3,0,CLERIC_INSECT_PLAGUE)
	See(Player3)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player4,HOPELESSNESS)
		CheckSpellState(Player4,ENFEEBLED)
		CheckSpellState(Player4,HELD)
		CheckSpellState(Player4,ENTANGLE)
		CheckSpellState(Player4,WEB)
		CheckSpellState(Player4,DOOM)
		CheckSpellState(Player4,MISCAST_MAGIC)
		StateCheck(Player4,STATE_PANIC)
		StateCheck(Player4,STATE_CHARMED)
		StateCheck(Player4,STATE_CONFUSED)
		StateCheck(Player4,STATE_SLEEPING)
		StateCheck(Player4,STATE_SLOWED)
		StateCheck(Player4,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player4,0,CLERIC_INSECT_PLAGUE)
	See(Player4)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player5,HOPELESSNESS)
		CheckSpellState(Player5,ENFEEBLED)
		CheckSpellState(Player5,HELD)
		CheckSpellState(Player5,ENTANGLE)
		CheckSpellState(Player5,WEB)
		CheckSpellState(Player5,DOOM)
		CheckSpellState(Player5,MISCAST_MAGIC)
		StateCheck(Player5,STATE_PANIC)
		StateCheck(Player5,STATE_CHARMED)
		StateCheck(Player5,STATE_CONFUSED)
		StateCheck(Player5,STATE_SLEEPING)
		StateCheck(Player5,STATE_SLOWED)
		StateCheck(Player5,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player5,0,CLERIC_INSECT_PLAGUE)
	See(Player5)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player6,HOPELESSNESS)
		CheckSpellState(Player6,ENFEEBLED)
		CheckSpellState(Player6,HELD)
		CheckSpellState(Player6,ENTANGLE)
		CheckSpellState(Player6,WEB)
		CheckSpellState(Player6,DOOM)
		CheckSpellState(Player6,MISCAST_MAGIC)
		StateCheck(Player6,STATE_PANIC)
		StateCheck(Player6,STATE_CHARMED)
		StateCheck(Player6,STATE_CONFUSED)
		StateCheck(Player6,STATE_SLEEPING)
		StateCheck(Player6,STATE_SLOWED)
		StateCheck(Player6,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player6,0,CLERIC_INSECT_PLAGUE)
	See(Player6)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

// Dispel Magic On Enemies
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(11)

		CheckStatGT(LastSeenBy(Myself),0,SHIELDGLOBE)
		CheckStatGT(LastSeenBy(Myself),0,MINORGLOBE)
		CheckSpellState(LastSeenBy(Myself),HASTE)
		CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		// [IWD2 PORT] commented: TRUE_SIGHT not in SPLSTATE.IDS
		// 	CheckSpellState(LastSeenBy(Myself),TRUE_SIGHT)
		CheckSpellState(LastSeenBy(Myself),DEFENSIVE_HARMONY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)
		// [IWD2 PORT] commented: FIRE_SHIELD not in SPLSTATE.IDS
		// 	CheckSpellState(LastSeenBy(Myself),FIRE_SHIELD)
		CheckSpellState(LastSeenBy(Myself),DEATH_WARD)
		// [IWD2 PORT] commented: CheckStatGT(LastSeenBy(Myself),0,DEFENSIVE_MODIFIER)  // no direct IWD2 stat replacement
		CheckStatGT(LastSeenBy(Myself),0,STR)
		// [IWD2 PORT] commented: PROTECTION_FROM_MAGIC_WEAPONS not in SPLSTATE.IDS
		// 	CheckSpellState(LastSeenBy(Myself),PROTECTION_FROM_MAGIC_WEAPONS)







		StateCheck(LastSeenBy(Myself),STATE_HASTED)
		StateCheck(LastSeenBy(Myself),STATE_BLESS)
		// [IWD2 PORT] commented: STATE_DRAWUPONHOLYMIGHT not in STATE.IDS
		// 	StateCheck(LastSeenBy(Myself),STATE_DRAWUPONHOLYMIGHT)
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!Heard([ANYONE],205)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(205)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

// Wizard Dispel Magic = Remove Magic
// Level 3 - Abjuration
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISPEL_MAGIC)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(11)

		CheckStatGT(LastSeenBy(Myself),0,SHIELDGLOBE)
		CheckStatGT(LastSeenBy(Myself),0,MINORGLOBE)
		CheckSpellState(LastSeenBy(Myself),HASTE)
		CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		// [IWD2 PORT] TRUE_SIGHT not in SPLSTATE.IDS; approximated with Mirror Image state
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
		CheckSpellState(LastSeenBy(Myself),DEFENSIVE_HARMONY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)
		// [IWD2 PORT] FIRE_SHIELD not in SPLSTATE.IDS; approximated with Blur state
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		CheckSpellState(LastSeenBy(Myself),DEATH_WARD)
		// [IWD2 PORT] commented: CheckStatGT(LastSeenBy(Myself),0,DEFENSIVE_MODIFIER)  // no direct IWD2 stat replacement
		CheckStatGT(LastSeenBy(Myself),0,STR)
		// [IWD2 PORT] PROTECTION_FROM_MAGIC_WEAPONS not in SPLSTATE.IDS; approximated with Bless state
		StateCheck(LastSeenBy(Myself),STATE_BLESS)







		StateCheck(LastSeenBy(Myself),STATE_HASTED)
		StateCheck(LastSeenBy(Myself),STATE_BLESS)
		// [IWD2 PORT] commented: STATE_DRAWUPONHOLYMIGHT not in STATE.IDS
		// 	StateCheck(LastSeenBy(Myself),STATE_DRAWUPONHOLYMIGHT)
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!Heard([ANYONE],205)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103323) // Spell: Remove Magic
		Shout(205)
		Spell(LastSeenBy(Myself),WIZARD_DISPEL_MAGIC)
END

// Cleric Dispel Magic = Dispel Magic
// Level 3 - Abjuration
// Dispel Magic On Allies
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player1,HOPELESSNESS)
		CheckSpellState(Player1,ENFEEBLED)
		CheckSpellState(Player1,HELD)
		CheckSpellState(Player1,ENTANGLE)
		CheckSpellState(Player1,WEB)
		CheckSpellState(Player1,DOOM)
		CheckSpellState(Player1,MISCAST_MAGIC)
		StateCheck(Player1,STATE_PANIC)
		StateCheck(Player1,STATE_CHARMED)
		StateCheck(Player1,STATE_CONFUSED)
		StateCheck(Player1,STATE_SLEEPING)
		StateCheck(Player1,STATE_SLOWED)
		StateCheck(Player1,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player1,0,CLERIC_INSECT_PLAGUE)
	See(Player1)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player2,HOPELESSNESS)
		CheckSpellState(Player2,ENFEEBLED)
		CheckSpellState(Player2,HELD)
		CheckSpellState(Player2,ENTANGLE)
		CheckSpellState(Player2,WEB)
		CheckSpellState(Player2,DOOM)
		CheckSpellState(Player2,MISCAST_MAGIC)
		StateCheck(Player2,STATE_PANIC)
		StateCheck(Player2,STATE_CHARMED)
		StateCheck(Player2,STATE_CONFUSED)
		StateCheck(Player2,STATE_SLEEPING)
		StateCheck(Player2,STATE_SLOWED)
		StateCheck(Player2,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player2,0,CLERIC_INSECT_PLAGUE)
	See(Player2)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player3,HOPELESSNESS)
		CheckSpellState(Player3,ENFEEBLED)
		CheckSpellState(Player3,HELD)
		CheckSpellState(Player3,ENTANGLE)
		CheckSpellState(Player3,WEB)
		CheckSpellState(Player3,DOOM)
		CheckSpellState(Player3,MISCAST_MAGIC)
		StateCheck(Player3,STATE_PANIC)
		StateCheck(Player3,STATE_CHARMED)
		StateCheck(Player3,STATE_CONFUSED)
		StateCheck(Player3,STATE_SLEEPING)
		StateCheck(Player3,STATE_SLOWED)
		StateCheck(Player3,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player3,0,CLERIC_INSECT_PLAGUE)
	See(Player3)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player4,HOPELESSNESS)
		CheckSpellState(Player4,ENFEEBLED)
		CheckSpellState(Player4,HELD)
		CheckSpellState(Player4,ENTANGLE)
		CheckSpellState(Player4,WEB)
		CheckSpellState(Player4,DOOM)
		CheckSpellState(Player4,MISCAST_MAGIC)
		StateCheck(Player4,STATE_PANIC)
		StateCheck(Player4,STATE_CHARMED)
		StateCheck(Player4,STATE_CONFUSED)
		StateCheck(Player4,STATE_SLEEPING)
		StateCheck(Player4,STATE_SLOWED)
		StateCheck(Player4,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player4,0,CLERIC_INSECT_PLAGUE)
	See(Player4)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player5,HOPELESSNESS)
		CheckSpellState(Player5,ENFEEBLED)
		CheckSpellState(Player5,HELD)
		CheckSpellState(Player5,ENTANGLE)
		CheckSpellState(Player5,WEB)
		CheckSpellState(Player5,DOOM)
		CheckSpellState(Player5,MISCAST_MAGIC)
		StateCheck(Player5,STATE_PANIC)
		StateCheck(Player5,STATE_CHARMED)
		StateCheck(Player5,STATE_CONFUSED)
		StateCheck(Player5,STATE_SLEEPING)
		StateCheck(Player5,STATE_SLOWED)
		StateCheck(Player5,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player5,0,CLERIC_INSECT_PLAGUE)
	See(Player5)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(13)
		CheckSpellState(Player6,HOPELESSNESS)
		CheckSpellState(Player6,ENFEEBLED)
		CheckSpellState(Player6,HELD)
		CheckSpellState(Player6,ENTANGLE)
		CheckSpellState(Player6,WEB)
		CheckSpellState(Player6,DOOM)
		CheckSpellState(Player6,MISCAST_MAGIC)
		StateCheck(Player6,STATE_PANIC)
		StateCheck(Player6,STATE_CHARMED)
		StateCheck(Player6,STATE_CONFUSED)
		StateCheck(Player6,STATE_SLEEPING)
		StateCheck(Player6,STATE_SLOWED)
		StateCheck(Player6,STATE_FEEBLEMINDED)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(Player6,0,CLERIC_INSECT_PLAGUE)
	See(Player6)

	!Heard([ANYONE],204)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(204)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

// Dispel Magic On Enemies
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DISPEL_MAGIC)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(14)

		CheckStatGT(LastSeenBy(Myself),0,SHIELDGLOBE)
		CheckStatGT(LastSeenBy(Myself),0,MINORGLOBE)
		CheckSpellState(LastSeenBy(Myself),HASTE)
		CheckStatGT(LastSeenBy(Myself),0,STONESKINS)
		// [IWD2 PORT] TRUE_SIGHT not in SPLSTATE.IDS; approximated with Mirror Image state
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
		CheckSpellState(LastSeenBy(Myself),DEFENSIVE_HARMONY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 		CheckStatGT(LastSeenBy(Myself),0,CLERIC_FREE_ACTION)
		// [IWD2 PORT] FIRE_SHIELD not in SPLSTATE.IDS; approximated with Blur state
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		CheckSpellState(LastSeenBy(Myself),DEATH_WARD)
		// [IWD2 PORT] commented: CheckStatGT(LastSeenBy(Myself),0,DEFENSIVE_MODIFIER)  // no direct IWD2 stat replacement
		CheckStatGT(LastSeenBy(Myself),0,STR)
		// [IWD2 PORT] PROTECTION_FROM_MAGIC_WEAPONS not in SPLSTATE.IDS; approximated with Bless state
		StateCheck(LastSeenBy(Myself),STATE_BLESS)







		StateCheck(LastSeenBy(Myself),STATE_HASTED)
		StateCheck(LastSeenBy(Myself),STATE_BLESS)
		// [IWD2 PORT] commented: STATE_DRAWUPONHOLYMIGHT not in STATE.IDS
		// 	StateCheck(LastSeenBy(Myself),STATE_DRAWUPONHOLYMIGHT)
		StateCheck(LastSeenBy(Myself),STATE_BLUR)
		StateCheck(LastSeenBy(Myself),STATE_MIRRORIMAGE)
	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!Heard([ANYONE],205)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103322) // Spell: Dispel Magic
		Shout(205)
		Spell(LastSeenBy(Myself),CLERIC_DISPEL_MAGIC)
END

// Level 5 - Conjuration
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_INSECT_PLAGUE)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	!CheckSpellState(LastSeenBy(Myself),MISCAST_MAGIC)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_INSECT_PLAGUE)
	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),2,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),5)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//..FloatMessage(Myself,?) // Spell: Insect Plague
		Spell(LastSeenBy(Myself),CLERIC_INSECT_PLAGUE)
END

// Level 3 - Conjuration
//IF
	//ActionListEmpty()
	//!GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: CLERIC_SUMMON_INSECTS not in IWD2 SPELL.IDS (no direct replacement)
// 	HaveSpell(CLERIC_SUMMON_INSECTS)
	//OR(4)
		//See(NearestEnemyOf([0.0.0.BARD_ALL]))
		//See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		//See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		//See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	//!CheckSpellState(LastSeenBy(Myself),MISCAST_MAGIC)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(LastSeenBy(Myself),0,CLERIC_INSECT_PLAGUE)
	//!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),2,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	//!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	//!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	//CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	//!InParty(LastSeenBy(Myself))
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,47688) // Casting Spell
// [IWD2 PORT] commented: CLERIC_SUMMON_INSECTS not in IWD2 SPELL.IDS (no direct replacement)
// 		Spell(LastSeenBy(Myself),CLERIC_SUMMON_INSECTS)
//END

// Level 3 - Enchantment
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_MISCAST_MAGIC)
	OR(4)
		See(NearestEnemyOf([0.0.0.BARD_ALL]))
		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	!CheckSpellState(LastSeenBy(Myself),MISCAST_MAGIC)
	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),4,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103321) // Spell: Miscast Magic
		Spell(LastSeenBy(Myself),CLERIC_MISCAST_MAGIC)
END

IF
 	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DOOM)
	See(NearestEnemyOf(Myself))
	OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
// [IWD2 PORT] disabled: ARMORCLASS causes runtime assertion in IWD2
// CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
		CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
		CheckStatLT(LastSeenBy(Myself),10,THAC0)
	!CheckSpellState(LastSeenBy(Myself),DOOM)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103320) // Spell: Doom
		Spell(LastSeenBy(Myself),CLERIC_DOOM)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_GREATER_MALISON)
	See(NearestEnemyOf(Myself))
	!CheckSpellState(NearestEnemyOf(Myself),MALISON)
	OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(NearestEnemyOf(Myself),5,SAVEVSSPELL)
// [IWD2 PORT] disabled: ARMORCLASS causes runtime assertion in IWD2
// CheckStatLT(NearestEnemyOf(Myself),0,ARMORCLASS)
		CheckStatGT(NearestEnemyOf(Myself),75,MAXHITPOINTS)
		CheckStatLT(NearestEnemyOf(Myself),10,THAC0)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103319) // Spell: Greater Malison
		Spell(NearestEnemyOf(Myself),WIZARD_GREATER_MALISON)
END

IF
 	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_PRAYER)
	See(NearestEnemyOf(Myself))

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103320) // Spell: Doom
		Spell(Myself,CLERIC_PRAYER)
END

IF
 	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SLOW)
	See(NearestEnemyOf(Myself))
	!StateCheck(NearestEnemyOf(Myself),STATE_SLOWED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLOWED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLOWED)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103320) // Spell: Doom
		Spell(Myself,WIZARD_SLOW)
END

IF
 	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DOMINATION)
	See(NearestEnemyOf(Myself))
	!StateCheck(NearestEnemyOf(Myself),STATE_CHARMED)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)

	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103320) // Spell: Doom
		Spell(Myself,WIZARD_DOMINATION)
END

// Nearest
IF
    ActionListEmpty()
    HaveSpell(WIZARD_RAY_OF_ENFEEBLEMENT)
    See(NearestEnemyOf(Myself),0)
    CheckStatGT(NearestEnemyOf(Myself),15,STR)
    !General(NearestEnemyOf(Myself),UNDEAD)
    !CheckSpellState(NearestEnemyOf(Myself),RAY_OF_ENFEEBLEMENT)
THEN
    RESPONSE #100
        Spell(NearestEnemyOf(Myself),WIZARD_RAY_OF_ENFEEBLEMENT)
END

// Second nearest
IF
    ActionListEmpty()
    HaveSpell(WIZARD_RAY_OF_ENFEEBLEMENT)
    See(SecondNearestEnemyOf(Myself),0)
    CheckStatGT(SecondNearestEnemyOf(Myself),15,STR)
    !General(SecondNearestEnemyOf(Myself),UNDEAD)
    !CheckSpellState(SecondNearestEnemyOf(Myself),RAY_OF_ENFEEBLEMENT)
THEN
    RESPONSE #100
        Spell(SecondNearestEnemyOf(Myself),WIZARD_RAY_OF_ENFEEBLEMENT)
END

// Third nearest
IF
    ActionListEmpty()
    HaveSpell(WIZARD_RAY_OF_ENFEEBLEMENT)
    See(ThirdNearestEnemyOf(Myself),0)
    CheckStatGT(ThirdNearestEnemyOf(Myself),15,STR)
    !General(ThirdNearestEnemyOf(Myself),UNDEAD)
    !CheckSpellState(ThirdNearestEnemyOf(Myself),RAY_OF_ENFEEBLEMENT)
THEN
    RESPONSE #100
        Spell(ThirdNearestEnemyOf(Myself),WIZARD_RAY_OF_ENFEEBLEMENT)
END

/////////////////////////////////////////////////////////////////////////////////////// Debuff/Control Wands
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,MAGE_ALL)
	HasItem("wand02",Myself)
// [IWD2 PORT] commented: NumCreatureVsPartyGT() not in IWD2 TRIGGER.IDS
// 	NumCreatureVsPartyGT(Myself,4)

	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(NearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(NearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(NearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(NearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(NearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(NearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(NearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(NearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(NearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(SecondNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(SecondNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(SecondNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(SecondNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(SecondNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(SecondNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(SecondNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(SecondNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(SecondNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(ThirdNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(ThirdNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(ThirdNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(ThirdNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(ThirdNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(ThirdNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(ThirdNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(ThirdNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(ThirdNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(FourthNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(FourthNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(FourthNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FourthNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(FourthNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(FourthNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(FourthNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FourthNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FourthNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(FourthNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(FourthNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(FifthNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(FifthNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(FifthNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FifthNearestEnemyOf(Myself),2)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(FifthNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(FifthNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(FifthNearestEnemyOf(Myself),DEMONIC)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FifthNearestEnemyOf(Myself),CAVALIER)
// [IWD2 PORT] commented: kit constant not in IWD2 KIT.IDS
// 	!Kit(FifthNearestEnemyOf(Myself),Blackguard)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(FifthNearestEnemyOf(Myself),5,SAVEVSSPELL)
	CheckStatLT(FifthNearestEnemyOf(Myself),75,RESISTMAGIC)






	!StateCheck(NearestEnemyOf(Myself),STATE_INVISIBLE)
	!StateCheck(NearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf(Myself),STATE_NOT_TARGETABLE)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf(Myself),1,HELD)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
	!InParty(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103318) // Wand: Fear
		UseItem("wand02",NearestEnemyOf(Myself))
END

IF
  	ActionListEmpty()
	Class(Myself,MAGE_ALL)
	HasItem("wand08",Myself)
// [IWD2 PORT] commented: NumCreatureVsPartyGT() not in IWD2 TRIGGER.IDS
// 	NumCreatureVsPartyGT(Myself,4)

	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(NearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(NearestEnemyOf(Myself),1)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(NearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(NearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(NearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(NearestEnemyOf(Myself),DEMONIC)
	!Race(NearestEnemyOf(Myself),ELF)
	CheckStatLT(NearestEnemyOf(Myself),75,RESISTMAGIC)




	LevelLT(NearestEnemyOf(Myself),5)

	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(SecondNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(SecondNearestEnemyOf(Myself),1)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(SecondNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(SecondNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(SecondNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(SecondNearestEnemyOf(Myself),DEMONIC)
	!Race(SecondNearestEnemyOf(Myself),ELF)
	CheckStatLT(SecondNearestEnemyOf(Myself),75,RESISTMAGIC)




	LevelLT(SecondNearestEnemyOf(Myself),5)

	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(ThirdNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(ThirdNearestEnemyOf(Myself),1)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(ThirdNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(ThirdNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(ThirdNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(ThirdNearestEnemyOf(Myself),DEMONIC)
	!Race(ThirdNearestEnemyOf(Myself),ELF)
	CheckStatLT(ThirdNearestEnemyOf(Myself),75,RESISTMAGIC)




	LevelLT(ThirdNearestEnemyOf(Myself),5)

	!StateCheck(FourthNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(FourthNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(FourthNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FourthNearestEnemyOf(Myself),1)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(FourthNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(FourthNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(FourthNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(FourthNearestEnemyOf(Myself),DEMONIC)
	!Race(FourthNearestEnemyOf(Myself),ELF)
	CheckStatLT(FourthNearestEnemyOf(Myself),75,RESISTMAGIC)




	LevelLT(FourthNearestEnemyOf(Myself),5)

	!StateCheck(FifthNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(FifthNearestEnemyOf(Myself),STATE_PANIC)
	!CheckStat(FifthNearestEnemyOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),4,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(FifthNearestEnemyOf(Myself),1)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStatGT(FifthNearestEnemyOf(Myself),0,WIZARD_SPELL_TRAP)
// [IWD2 PORT] commented: spell stat not in IWD2 STATS.IDS
// 	!CheckStat(FifthNearestEnemyOf(Myself),1,CLERIC_SHIELD_OF_THE_ARCHONS)
	!General(FifthNearestEnemyOf(Myself),UNDEAD)
	// [IWD2 PORT] commented: DEMONIC not in GENERAL.IDS
	// 	!General(FifthNearestEnemyOf(Myself),DEMONIC)
	!Race(FifthNearestEnemyOf(Myself),ELF)
	CheckStatLT(FifthNearestEnemyOf(Myself),75,RESISTMAGIC)




	LevelLT(FifthNearestEnemyOf(Myself),5)

	!StateCheck(NearestEnemyOf(Myself),STATE_INVISIBLE)
	!StateCheck(NearestEnemyOf(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf(Myself),STATE_NOT_TARGETABLE)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf(Myself),1,HELD)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
// [IWD2 PORT] commented: SAVEVSWANDS not in IWD2 STATS.IDS (no direct replacement)
// 	CheckStatGT(NearestEnemyOf(Myself),5,SAVEVSWANDS)

	!InParty(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103317) // Wand: Sleep
		UseItem("wand08",NearestEnemyOf(Myself))
END

IF
  	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,MAGE_ALL)
	HasItem("wand04",Myself)
	!CheckSpellState(NearestEnemyOf(Myself),HELD)
	!StateCheck(NearestEnemyOf(Myself),STATE_STUNNED | STATE_HELPLESS)
// [IWD2 PORT] commented: SAVEVSWANDS not in IWD2 STATS.IDS (no direct replacement)
// 	CheckStatGT(NearestEnemyOf(Myself),10,SAVEVSWANDS)
	!General(NearestEnemyOf(Myself),UNDEAD)
	OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(NearestEnemyOf(Myself),5,SAVEVSSPELL)
// [IWD2 PORT] disabled: ARMORCLASS causes runtime assertion in IWD2
// CheckStatLT(NearestEnemyOf(Myself),0,ARMORCLASS)
		CheckStatGT(NearestEnemyOf(Myself),75,MAXHITPOINTS)
		CheckStatLT(NearestEnemyOf(Myself),10,THAC0)
	!InParty(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103316) // Wand: Paralyzation
		UseItem("wand04",NearestEnemyOf(Myself))
END

/////////////////////////////////////////////////////////////////////////////////////// Turn Undead
// Start turning undead if can turn nearby undead

// Turn Undead (Cleric) when undead are present
IF
    ActionListEmpty()
    See([EVILCUTOFF],0)
    General([EVILCUTOFF],UNDEAD)
    OR(2)
        Class(Myself,CLERIC_ALL)
        Class(Myself,PALADIN_ALL)
    !ModalState(Myself,TURNUNDEAD)
THEN
    RESPONSE #100
        Turn()
END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(Nearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(Nearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(SecondNearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(SecondNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(ThirdNearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(ThirdNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(FourthNearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(FourthNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(FifthNearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(FifthNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(SixthNearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(SixthNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range(SeventhNearest([EVILCUTOFF.UNDEAD]),12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	CanTurn(SeventhNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	!ButtonDisabled(BUTTON_TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
		//FloatMessage(Myself,103315) // Turn Undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		Turn()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

// Keep turning undead if already turning nearby undead
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// IF
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ActionListEmpty()
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	ModalState(TURNUNDEAD)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	Range([EVILCUTOFF.UNDEAD],12)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	OR(7)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(Nearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(SecondNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(ThirdNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(FourthNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(FifthNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(SixthNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 		CanTurn(SeventhNearest([EVILCUTOFF.UNDEAD]),5)
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// THEN
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// 	RESPONSE #100
// [IWD2 PORT] commented: Turn Undead scripting tokens not available in IWD2 IDS/TRIGGER sets
// END

////////////////////////////////////////////////////////////////////////////////// Aura Of Flaming Death

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_AURA_OF_FLAMING_DEATH)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HPPercentGT(NearestEnemyOf(Myself),0)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		CheckStatLT(LastSeenBy(Myself),10,THAC0)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,47688) // Casting Spell
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Myself,CLERIC_AURA_OF_FLAMING_DEATH)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

////////////////////////////////////////////////////////////////////////////////// Buff Items

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,MAGE_ALL)
	CheckStatLT(Myself,24,INT)
	HasItem("potn29",Myself)  // Potion Of Genius
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn29",Myself)  // Potion Of Genius
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,MAGE_ALL)
	CheckStatLT(Myself,24,INT)
	HasItem("potn37",Myself)  // Potion Of Mind Focusing
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn37",Myself)  // Potion Of Mind Focusing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,FIGHTER_ALL)
	CheckStatLT(Myself,24,DEX)
	HasItem("potn37",Myself)  // Potion Of Mind Focusing
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn37",Myself)  // Potion Of Mind Focusing
END

IF 
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,CLERIC_ALL)
	CheckStatLT(Myself,18,WIS)
	HasItem("potn43",Myself)  // Potion Of Insight
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47683) // Heal Self
		UseItem("potn43",Myself)  // Potion Of Insight
END

//IF
//	ActionListEmpty()
//    !GlobalTimerNotExpired("castnattack","LOCALS")
//	Global("cloakGargoyle","GLOBAL",1)
//	HasItem("bdclck05",Myself) // Cloak Of The Gargoyle - Stone Form Once Per Day
//	//CheckStat(Myself,0,STONESKINS)
//	//CheckStat(Myself,0,STONESKINSGOLEM)
//	//!CheckSpellState(Myself,STONESKIN)
//THEN
//	RESPONSE #100
//      SetGlobalTimer("castnattack","LOCALS",6)
//		//FloatMessage(Myself,71483) // Item: Cloak Of The Gargoyle
//		SetGlobal("cloakGargoyle","GLOBAL",0)
//		UseItemSlotAbility(Myself,SLOT_CLOAK,1)
//END

////////////////////////////////////////////////////////////////////////////////// If have a buff spell use it

// 1 Round = 6 Seconds Real Time
// 1 Turn = 10 Rounds = 1 Minute Real time
// 1 Hour = 5 Turns = 50 Rounds = 5 Minutes Real Time

IF
    ActionListEmpty()
    CheckStatGT(Myself,0,CLASSLEVELCLERIC)
    HaveSpell(CLERIC_RECITATION)
    !CheckSpellState(Myself,RECITATION)
THEN
    RESPONSE #100
        Spell(Myself,CLERIC_RECITATION)
END

IF
    ActionListEmpty()
    CheckStatGT(Myself,0,CLASSLEVELCLERIC)
    HaveSpell(CLERIC_ARMOR_OF_FAITH)
    !CheckSpellState(Myself,ARMOR_OF_FAITH)
THEN
    RESPONSE #100
        Spell(Myself,CLERIC_ARMOR_OF_FAITH)
END

IF
    ActionListEmpty()
    HaveSpell(CLERIC_PROTECTION_FROM_EVIL)
    !CheckSpellState(Player1,PROTECTION_FROM_EVIL)
THEN
    RESPONSE #100
        Spell(Player1,CLERIC_PROTECTION_FROM_EVIL)
END

// Minor Elemental Barrier (self buff)
IF
    ActionListEmpty()
    HaveSpell(CLERIC_MINOR_ELEMENTAL_BARRIER)
    !CheckSpellState(Player1,MINOR_ELEMENTAL_BARRIER)
THEN
    RESPONSE #100
        Spell(Player1,CLERIC_MINOR_ELEMENTAL_BARRIER)
END

// Level 1
// 50 Rounds (5 minutes) - 15ft Radius
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_REMOVE_FEAR)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103306) // Spell: Remove Fear
		Spell(Myself,CLERIC_REMOVE_FEAR)
END

// Level 4 - Necromancy 7
// 10 Rounds/Level (60 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEATH_WARD)
	!CheckSpellState(Player1,DEATH_WARD)
	!CheckSpellState(Player1,DEATH_WARD)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,4)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103366) // Spell: Death Ward
		Spell(Player1,CLERIC_DEATH_WARD)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEATH_WARD)
	!CheckSpellState(Player2,DEATH_WARD)
	!CheckSpellState(Player2,DEATH_WARD)

	!CheckStat(Player2,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player2,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player2,4)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player2,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103366) // Spell: Death Ward
		Spell(Player2,CLERIC_DEATH_WARD)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEATH_WARD)
	!CheckSpellState(Player3,DEATH_WARD)
	!CheckSpellState(Player3,DEATH_WARD)

	!CheckStat(Player3,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player3,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player3,4)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player3,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103366) // Spell: Death Ward
		Spell(Player3,CLERIC_DEATH_WARD)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEATH_WARD)
	!CheckSpellState(Player4,DEATH_WARD)
	!CheckSpellState(Player4,DEATH_WARD)

	!CheckStat(Player4,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player4,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player4,4)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player4,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103366) // Spell: Death Ward
		Spell(Player4,CLERIC_DEATH_WARD)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEATH_WARD)
	!CheckSpellState(Player5,DEATH_WARD)
	!CheckSpellState(Player5,DEATH_WARD)

	!CheckStat(Player5,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player5,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player5,4)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player5,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103366) // Spell: Death Ward
		Spell(Player5,CLERIC_DEATH_WARD)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEATH_WARD)
	!CheckSpellState(Player6,DEATH_WARD)
	!CheckSpellState(Player6,DEATH_WARD)

	!CheckStat(Player6,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player6,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player6,4)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player6,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103366) // Spell: Death Ward
		Spell(Player6,CLERIC_DEATH_WARD)
END

// Level 4 - Abjuration 1
// 5 Rounds/Level (30 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_PROTECTION_FROM_LIGHTNING)
	CheckStatLT(Player1,99,RESISTELECTRICITY)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,4)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103296) // Spell: Protection From Lightning
		Spell(Player1,CLERIC_PROTECTION_FROM_LIGHTNING)
END

// Level 4
// 4 Rounds/Level (24 seconds/Level) - 15ft Radius
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECTION_FROM_EVIL_10_FOOT)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Myself,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103304) // Spell: Protection Group From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Myself,CLERIC_PROTECTION_FROM_EVIL_10_FOOT)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 5 - Enchantment 4
// 4 Rounds/Level (24 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Player1,0,CLERIC_CHAOTIC_COMMANDS)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,5)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103300) // Spell: Chaotic Commands
// [IWD2 PORT] commented: spell stat not in STATS.IDS
		Spell(Player1,CLERIC_CHAOTIC_COMMANDS)
END

// Level 5 - Enchantment 4
// 4 Rounds/Level (24 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Player2,0,CLERIC_CHAOTIC_COMMANDS)

	!CheckStat(Player2,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player2,4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player2,5)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player2,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103300) // Spell: Chaotic Commands
		Spell(Player2,CLERIC_CHAOTIC_COMMANDS)
END

// Level 5 - Enchantment 4
// 4 Rounds/Level (24 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Player3,0,CLERIC_CHAOTIC_COMMANDS)

	!CheckStat(Player3,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player3,4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player3,5)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player3,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103300) // Spell: Chaotic Commands
		Spell(Player3,CLERIC_CHAOTIC_COMMANDS)
END

// Level 5 - Enchantment 4
// 4 Rounds/Level (24 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Player4,0,CLERIC_CHAOTIC_COMMANDS)

	!CheckStat(Player4,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player4,4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player4,5)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player4,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103300) // Spell: Chaotic Commands
		Spell(Player4,CLERIC_CHAOTIC_COMMANDS)
END

// Level 5 - Enchantment 4
// 4 Rounds/Level (24 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Player5,0,CLERIC_CHAOTIC_COMMANDS)

	!CheckStat(Player5,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player5,4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player5,5)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player5,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103300) // Spell: Chaotic Commands
		Spell(Player5,CLERIC_CHAOTIC_COMMANDS)
END

// Level 5 - Enchantment 4
// 4 Rounds/Level (24 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAOTIC_COMMANDS)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Player6,0,CLERIC_CHAOTIC_COMMANDS)

	!CheckStat(Player6,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player6,4,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player6,5)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player6,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103300) // Spell: Chaotic Commands
		Spell(Player6,CLERIC_CHAOTIC_COMMANDS)
END

// Level 1 - Abjuration 1
// 3 Rounds/Level (18 seconds/Level) - 1 Creature
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Player1,PROTECTION_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStatGT(Player1,0,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,1)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player1,STATE_INVISIBLE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103305) // Spell: Protection From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Player1,CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 1
// 3 Rounds/Level (18 seconds/Level) - 1 Creature
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Player2,PROTECTION_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStatGT(Player2,0,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStat(Player2,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player2,1)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player2,STATE_INVISIBLE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player2,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103305) // Spell: Protection From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Player2,CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 1
// 3 Rounds/Level (18 seconds/Level) - 1 Creature
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Player3,PROTECTION_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStatGT(Player3,0,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStat(Player3,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player3,1)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player3,STATE_INVISIBLE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player3,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103305) // Spell: Protection From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Player3,CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 1
// 3 Rounds/Level (18 seconds/Level) - 1 Creature
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Player4,PROTECTION_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStatGT(Player4,0,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStat(Player4,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player4,1)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player4,STATE_INVISIBLE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player4,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103305) // Spell: Protection From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Player4,CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 1
// 3 Rounds/Level (18 seconds/Level) - 1 Creature
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Player5,PROTECTION_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStatGT(Player5,0,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStat(Player5,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player5,1)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player5,STATE_INVISIBLE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player5,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103305) // Spell: Protection From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Player5,CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 1
// 3 Rounds/Level (18 seconds/Level) - 1 Creature
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// IF
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	ActionListEmpty()
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	HaveSpell(CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckSpellState(Player6,PROTECTION_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStatGT(Player6,0,PROTECTION_FROM_EVIL)

// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!CheckStat(Player6,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player6,1)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player6,STATE_INVISIBLE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player6,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	!StateCheck(Myself,STATE_SILENCED)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// THEN
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 	RESPONSE #100
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103305) // Spell: Protection From Evil
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// 		Spell(Player6,CLERIC_PROTECT_FROM_EVIL)
// [IWD2 PORT] commented: spell/state not available in IWD2 IDS
// END

// Level 5 - Alteration 8
// 3 Rounds/Level (18 seconds/level) - 1 Creature
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHAMPIONS_STRENGTH)
	CheckStatLT(WeakestOf(Myself),18,STR)

	!CheckStat(WeakestOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(WeakestOf(Myself),8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(WeakestOf(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(WeakestOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(WeakestOf(Myself),5)
	!StateCheck(WeakestOf(Myself),STATE_INVISIBLE)
	!StateCheck(WeakestOf(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(WeakestOf(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103285) // Spell: Champions Strength
		Spell(WeakestOf(Myself),CLERIC_CHAMPIONS_STRENGTH)
END

// Level 4 - Abjuration 1
// 10 Rounds + 1 Round/Level (60 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FREE_ACTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	CheckStat(Player1,0,CLERIC_FREE_ACTION)
	!CheckSpellState(Player1,FREE_ACTION)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,4)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Player1,CLERIC_FREE_ACTION)
END

// Level 4 - Abjuration 1
// 10 Rounds + 1 Round/Level (60 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FREE_ACTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	CheckStat(Player2,0,CLERIC_FREE_ACTION)
	!CheckSpellState(Player2,FREE_ACTION)

	!CheckStat(Player2,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player2,4)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player2,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Player2,CLERIC_FREE_ACTION)
END

// Level 4 - Abjuration 1
// 10 Rounds + 1 Round/Level (60 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FREE_ACTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	CheckStat(Player3,0,CLERIC_FREE_ACTION)
	!CheckSpellState(Player3,FREE_ACTION)

	!CheckStat(Player3,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player3,4)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player3,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Player3,CLERIC_FREE_ACTION)
END

// Level 4 - Abjuration 1
// 10 Rounds + 1 Round/Level (60 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FREE_ACTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	CheckStat(Player4,0,CLERIC_FREE_ACTION)
	!CheckSpellState(Player4,FREE_ACTION)

	!CheckStat(Player4,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player4,4)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player4,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Player4,CLERIC_FREE_ACTION)
END

// Level 4 - Abjuration 1
// 10 Rounds + 1 Round/Level (60 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FREE_ACTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	CheckStat(Player5,0,CLERIC_FREE_ACTION)
	!CheckSpellState(Player5,FREE_ACTION)

	!CheckStat(Player5,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player5,4)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player5,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Player5,CLERIC_FREE_ACTION)
END

// Level 4 - Abjuration 1
// 10 Rounds + 1 Round/Level (60 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FREE_ACTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	CheckStat(Player6,0,CLERIC_FREE_ACTION)
	!CheckSpellState(Player6,FREE_ACTION)

	!CheckStat(Player6,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player6,4)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player6,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Player6,CLERIC_FREE_ACTION)
END

// Level 2 - Alteration 8
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BARKSKIN)
	!CheckSpellState(Player1,BARKSKIN)
	NumInPartyGT(0)

	!Heard([ANYONE],206) // If someone else casting barkskin

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,2)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Shout(206) // Casting Barksin
		Spell(Player1,CLERIC_BARKSKIN)
END

// Level 2 - Alteration 8
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BARKSKIN)
	!CheckSpellState(Player2,BARKSKIN)
	NumInPartyGT(1)

	!Heard([ANYONE],206) // If someone else casting barkskin

	!CheckStat(Player2,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player2,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player2,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player2,2)
	!StateCheck(Player2,STATE_INVISIBLE)
	!StateCheck(Player2,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player2,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Shout(206) // Casting Barksin
		Spell(Player2,CLERIC_BARKSKIN)
END

// Level 2 - Alteration 8
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BARKSKIN)
	!CheckSpellState(Player3,BARKSKIN)
	NumInPartyGT(2)

	!Heard([ANYONE],206) // If someone else casting barkskin

	!CheckStat(Player3,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player3,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player3,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player3,2)
	!StateCheck(Player3,STATE_INVISIBLE)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player3,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Shout(206) // Casting Barksin
		Spell(Player3,CLERIC_BARKSKIN)
END

// Level 2 - Alteration 8
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BARKSKIN)
	!CheckSpellState(Player4,BARKSKIN)
	NumInPartyGT(3)

	!Heard([ANYONE],206) // If someone else casting barkskin

	!CheckStat(Player4,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player4,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player4,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player4,2)
	!StateCheck(Player4,STATE_INVISIBLE)
	!StateCheck(Player4,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player4,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Shout(206) // Casting Barksin
		Spell(Player4,CLERIC_BARKSKIN)
END

// Level 2 - Alteration 8
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BARKSKIN)
	!CheckSpellState(Player5,BARKSKIN)
	NumInPartyGT(4)

	!Heard([ANYONE],206) // If someone else casting barkskin

	!CheckStat(Player5,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player5,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player5,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player5,2)
	!StateCheck(Player5,STATE_INVISIBLE)
	!StateCheck(Player5,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player5,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Shout(206) // Casting Barksin
		Spell(Player5,CLERIC_BARKSKIN)
END

// Level 2 - Alteration 8
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BARKSKIN)
	!CheckSpellState(Player6,BARKSKIN)
	NumInPartyGT(5)

	!Heard([ANYONE],206) // If someone else casting barkskin

	!CheckStat(Player6,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player6,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player6,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player6,2)
	!StateCheck(Player6,STATE_INVISIBLE)
	!StateCheck(Player6,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player6,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Shout(206) // Casting Barksin
		Spell(Player6,CLERIC_BARKSKIN)
END

// Level 1
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SHILLELAGH)  // SPPR110.SPL (Shillelagh)
	!HasItem("FBLADE",Myself)  // Flame Blade
	!HasItem("SHILLE",Myself)  // Shillelagh
	!HasItem("SHAMMR",Myself)  // Spiritual Hammer
	!HasItem("CHILLT",Myself)  // Chill Touch
	!HasItem("GHOULT",Myself)  // Ghoul Touch

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103302) // Spell: Shillelagh
		Spell(Myself,CLERIC_SHILLELAGH)  // SPPR110.SPL (Shillelagh)
END

// Level 2
// 4 Rounds + 1 Round/Level (24 seconds + 6 seconds/level) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_FLAME_BLADE)
	!HasItem("FBLADE",Myself)  // Flame Blade
	!HasItem("SHILLE",Myself)  // Shillelagh
	!HasItem("SHAMMR",Myself)  // Spiritual Hammer
	!HasItem("CHILLT",Myself)  // Chill Touch
	!HasItem("GHOULT",Myself)  // Ghoul Touch

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103301) // Spell: Flame Blade
		Spell(Myself,CLERIC_FLAME_BLADE)
END

// Level 1
// 3 Rounds + 1 Round/Level (18 seconds + 6 seconds/level) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_ARMOR_OF_FAITH)
	!CheckSpellState(Myself,ARMOR_OF_FAITH)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103298) // Spell: Armor Of Faith
		Spell(Myself,CLERIC_ARMOR_OF_FAITH)
END

// Level 3 - Abjuration 1
// 3 Rounds + 1 Round/Level (18 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_PROTECTION_FROM_FIRE)
	CheckStatLT(Player1,99,RESISTFIRE)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,3)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103295) // Spell: Protection From Fire
		Spell(Player1,CLERIC_PROTECTION_FROM_FIRE)
END

// Level 5 - Alteration 8
// 3 Rounds + 1 Round/Level (18 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_MAGIC_RESISTANCE)
	CheckStatLT(Player1,99,RESISTMAGIC)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,5)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103294) // Spell: Magic Resistance
		Spell(Player1,CLERIC_MAGIC_RESISTANCE)
END

// Level 2 - Necromancy 2, Conjuration 7
// 1 Round + 1 Round/Level (6 seconds + 6 seconds/level) - 1 Creature
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_AID)
	!CheckSpellState(Player1,AID)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,2,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,2)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103288) // Spell: Aid
		Spell(Player1,CLERIC_AID)
END

// [IWD2 PORT] commented out block: spell not available (CLERIC_RESIST_FIRE not in IWD2 SPELL.IDS)
// IF
// 	ActionListEmpty()
// 	!GlobalTimerNotExpired("castnattack","LOCALS")
// 	HaveSpell(CLERIC_RECITATION)  // SPPR513.SPL (Righteous Magic)
// 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// 	!StateCheck(Myself,STATE_SILENCED)
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// THEN
// 	RESPONSE #100
// 	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103290) // Spell: Righteous Magic
// 		Spell(Myself,CLERIC_RECITATION)
// END
// 
// [IWD2 PORT] commented out block: spell not available (CLERIC_RIGHTEOUS_WRATH_OF_THE_FAITHFUL not in IWD2 SPELL.IDS)
// IF
// 	ActionListEmpty()
// 	!GlobalTimerNotExpired("castnattack","LOCALS")
// 	HaveSpell(CLERIC_RIGHTEOUS_WRATH_OF_THE_FAITHFUL)  // SPPR513.SPL (Righteous Magic)
// 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// 	!StateCheck(Myself,STATE_SILENCED)
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// THEN
// 	RESPONSE #100
// 	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103290) // Spell: Righteous Magic
// 		Spell(Myself,CLERIC_RIGHTEOUS_WRATH_OF_THE_FAITHFUL)
// END
// 
// Level 5
// 1 Round/Level (6 seconds/level) - Self
// [IWD2 PORT] commented out block: spell not available (CLERIC_RIGHTEOUS_MAGIC not in IWD2 SPELL.IDS)
// IF
// 	ActionListEmpty()
// 	!GlobalTimerNotExpired("castnattack","LOCALS")
// 	HaveSpell(CLERIC_RIGHTEOUS_MAGIC)  // SPPR513.SPL (Righteous Magic)
// 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// 	!StateCheck(Myself,STATE_SILENCED)
// 	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
// THEN
// 	RESPONSE #100
// 	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103290) // Spell: Righteous Magic
// 		Spell(WeakestOf(Myself),CLERIC_RIGHTEOUS_MAGIC)
// END
// 
// Note: There is no resist fire or resist cold spell for clerics but a single resist fire and cold spell
// Casting CLERIC_RESIST_FIRE or CLERIC_RESIST_COLD actually casts the resist fire and cold spell
// Level 2 - Alteration 8
// 1 Round/Level (6 seconds/level) - 1 Creature
// IF
// 	ActionListEmpty()
//     !GlobalTimerNotExpired("castnattack","LOCALS")
// 	HaveSpell(CLERIC_RESIST_FIRE)
// 	OR(2)
// 		CheckStatLT(Player1,99,RESISTFIRE)
// 		CheckStatLT(Player1,99,RESISTCOLD)
// 
// 	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,2)
// 	!StateCheck(Player1,STATE_INVISIBLE)
// 	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)
// 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// 	!StateCheck(Myself,STATE_SILENCED)
// 	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
// THEN
// 	RESPONSE #100
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103293) // Spell: Resist Fire And Cold
// 		Spell(Player1,CLERIC_RESIST_FIRE)
// END

// Level 4
// 1 Rounds/Level (6 seconds/level) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_HOLY_POWER)
	!CheckSpellState(Myself,HOLY_POWER)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103297) // Spell: Holy Power
		Spell(Myself,CLERIC_HOLY_POWER)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_ENTROPY_SHIELD)
	!CheckSpellState(Myself,ENTROPY_SHIELD)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103297) // Spell: Holy Power
		Spell(Myself,CLERIC_ENTROPY_SHIELD)
END

// Level 3
// 10 Rounds (60 seconds) - 15ft Radius
IF
	ActionListEmpty()
	!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_STRENGTH_OF_ONE)
	CheckStatLT(WeakestOf(Myself),18,STR)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103291) // Spell: Strength Of One
		Spell(WeakestOf(Myself),CLERIC_STRENGTH_OF_ONE)
END

// Level 2 - Conjuration 2
// 10 Rounds (60 seconds) - 15ft Radius
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CHANT)  // SPPR203.SPL (Chant)
	!StateCheck(Player1,STATE_CHANT)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,2,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,2)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103286) // Spell: Chant
		Spell(Player1,CLERIC_CHANT)  // SPPR203.SPL (Chant)
END

// Level 1 - Conjuration 2
// 6 Rounds (36 seconds) - 15ft Radius
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_BLESS)  // SPPR101.SPL (Bless)
	!StateCheck(Player1,STATE_BLESS)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,2,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,1)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103287) // Spell: Bless
		Spell(Player1,CLERIC_BLESS)  // SPPR101.SPL (Bless)
END

// Level 4
// 6 Rounds (36 seconds) - 15ft Radius
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DEFENSIVE_HARMONY)
	!CheckSpellState(Myself,DEFENSIVE_HARMONY)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103289) // Spell: Defensive Harmony
		Spell(Myself,CLERIC_DEFENSIVE_HARMONY)
END

// Level 2
// 4 Rounds (24 seconds) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_DRAW_UPON_HOLY_MIGHT)
	!CheckSpellState(Myself,DRAW_UPON_HOLY_MIGHT)
	// [IWD2 PORT] commented: STATE_DRAWUPONHOLYMIGHT not in STATE.IDS
	// 	!StateCheck(Myself,STATE_DRAWUPONHOLYMIGHT)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103299) // Spell: Holy Might
		Spell(Myself,CLERIC_DRAW_UPON_HOLY_MIGHT)
END

// Level 10
// 4 Minutes or Until Charges Depleted - Self
// [IWD2 PORT] commented out block: spell not available (WIZARD_ENERGY_BLADES not in IWD2 SPELL.IDS)
// IF
// 	ActionListEmpty()
//     OR(2)
//   		CheckStat(Myself,1,AURACLEANSING)
//   		!GlobalTimerNotExpired("castnattack","LOCALS")
// 	HaveSpell(WIZARD_ENERGY_BLADES)
// 	!HasItem("ENEBLADE",Myself)
// 	!HasItem("MELFMET",Myself)
// 
// 	OR(4)
// 		See(NearestEnemyOf([0.0.0.BARD_ALL]))
// 		See(NearestEnemyOf([0.0.0.DRUID_ALL]))
// 		See(NearestEnemyOf([0.0.0.MAGE_ALL]))
// 		See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
// 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
// 	!StateCheck(Myself,STATE_SILENCED)
// 	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
// THEN
// 	RESPONSE #100
//         SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,47688) // Casting Spell
// 		Spell(Myself,WIZARD_ENERGY_BLADES)
// END

//IF
	//ActionListEmpty()
  	//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(CLERIC_ENERGY_BLADES)
	//!HasItem("ENEBLADE",Myself)
	//!HasItem("MELFMET",Myself)
//
	//OR(4)
		//See(NearestEnemyOf([0.0.0.BARD_ALL]))
		//See(NearestEnemyOf([0.0.0.DRUID_ALL]))
		//See(NearestEnemyOf([0.0.0.MAGE_ALL]))
		//See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,47688) // Casting Spell
		// Spell(Myself,CLERIC_ENERGY_BLADES)
//END

// Level 3
// Until Charges Depleted - Self
//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(WIZARD_MELF_METEOR)
	//!HasItem("ENEBLADE",Myself)
	//!HasItem("MELFMET",Myself)
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103279) // Spell: Melfs Minute Meteors
		// Spell(Myself,WIZARD_MELF_METEOR)
//END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_CATS_GRACE)
	CheckStatLT(Player1,19,DEX)
	!CheckSpellState(Player1,CATS_GRACE)
	
	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		Spell(Player1,WIZARD_CATS_GRACE)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_EMOTION_HOPE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		Spell(Myself,WIZARD_EMOTION_HOPE)
END

//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(WIZARD_EMOTION_COURAGE)
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		// Spell(Myself,WIZARD_EMOTION_COURAGE)
//END

// Level 6
// 10 Rounds/Level (60 seconds/level) - 1 Creature
// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_PROTECTION_FROM_THE_ELEMENTS)
	// [IWD2 PORT] removed stat-based cast coordination: !CheckStatGT(Myself,0,WIZARD_PROTECTION_FROM_THE_ELEMENTS)
	// [IWD2 PORT] removed coordination: !Heard([ANYONE],CASTING_PROTECTION_FROM_MAGIC_ENERGY) // If someone else casting protection from magic energy

	// [IWD2 PORT] commented: spell stat not in STATS.IDS
	// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
		SetGlobalTimer("castnattack","LOCALS",6)
		// [IWD2 PORT] removed coordination: Shout(CASTING_PROTECTION_FROM_MAGIC_ENERGY)
		////FloatMessage(Myself,103373) // Spell: Protection From Magic Energy
		Spell(Myself,WIZARD_PROTECTION_FROM_THE_ELEMENTS)
END

// Level 2 - Alteration 8
// 10 Rounds/Level (60 seconds/level) - 1 Creature
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_STRENGTH)
	CheckStatLT(WeakestOf(Myself),18,STR)

	!CheckStat(WeakestOf(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(WeakestOf(Myself),8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(WeakestOf(Myself),1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(WeakestOf(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(WeakestOf(Myself),2)
	!StateCheck(WeakestOf(Myself),STATE_INVISIBLE)
	!StateCheck(WeakestOf(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(WeakestOf(Myself),STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
	    SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103278) // Spell: Strength
		Spell(WeakestOf(Myself),WIZARD_STRENGTH)
END

// Level 5 - Abjuration 1
// 10 Rounds/Level (60 seconds/level) - 1 Creature
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_PROTECTION_FROM_ACID)
	CheckStatLT(Player1,99,RESISTACID)

	!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,5)
	!StateCheck(Player1,STATE_INVISIBLE)
	!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103277) // Spell: Protection From Acid
		Spell(Player1,WIZARD_PROTECTION_FROM_ACID)
END

// Level 3 - Abjuration 1
// 10 Rounds/Level (60 seconds/level) - 1 Creature
//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(WIZARD_PROTECTION_FROM_FIRE)
	//CheckStatLT(Player1,99,RESISTFIRE)
//
	//!CheckStat(Player1,1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: WIZARD_SPELL_DEFLECTION not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_DEFLECTION)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(Player1,1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(Player1,3)
	//!StateCheck(Player1,STATE_INVISIBLE)
	//!StateCheck(Player1,STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(Player1,STATE_NOT_TARGETABLE)
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103276) // Spell: Protection From Fire
		// Spell(Player1,WIZARD_PROTECTION_FROM_FIRE)
//END

// Level 1
// 50 rounds (5 minutes) - Self
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SHIELD)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		////FloatMessage(Myself,71406) // Spell: Shield
		Spell(Myself,WIZARD_SHIELD)
END

// Level 2
// 50 Rounds (5 minutes) - 15ft Radius
//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(WIZARD_RESIST_FEAR)
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103283) // Spell: Resist Fear
		// Spell(Myself,WIZARD_RESIST_FEAR)
//END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_SEVEN_EYES)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103303) // Spell: Barkskin
		Spell(Myself,WIZARD_SEVEN_EYES)
END

// Level 2 - Illusion 5
// 4 Rounds + 2 Round/Level (24 seconds + 12 seconds/level) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_BLUR)
	!StateCheck(Myself,STATE_BLUR)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(Myself,WIZARD_BLUR)
END

// Level 2
// 3 Rounds + 1 Rounds/Level (18 seconds + 6 seconds/level) - Self
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MIRROR_IMAGE)
	!StateCheck(Myself,STATE_MIRRORIMAGE)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103282) // Spell: Mirror Image
		Spell(Myself,WIZARD_MIRROR_IMAGE)
END

// Level 4
// 3 Rounds + 1 Rounds/Level (18 seconds + 6 seconds/level) - 1 Creature
// Invisibility on Rogue/Player 3
IF
	ActionListEmpty()
    OR(2)
  		CheckStat(Myself,1,AURACLEANSING)
  		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_IMPROVED_INVISIBILITY)
	!StateCheck(Player3,STATE_IMPROVEDINVISIBILITY)

	// !CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//DisplayStringHead(Myself,103280) // Spell: Improved Invisibility
		Spell(Player3,WIZARD_IMPROVED_INVISIBILITY)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_IMPROVED_INVISIBILITY)
	!StateCheck(Myself,STATE_IMPROVEDINVISIBILITY)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103280) // Spell: Improved Invisibility
		Spell(Myself,WIZARD_IMPROVED_INVISIBILITY)
END

//////////////////////////////////////////////////////////////////////////// Decide On Next Target You Can See
// Protect The Wizard if their attacker is not disabled
// [IWD2 PORT] block simplified/uncommented: BG/EE-only group casting/summon coordination
// IF
// ActionListEmpty()

// [IWD2 PORT] removed coordination: HPPercentGT(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),0)
// [IWD2 PORT] removed coordination: !InParty(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])))

// [IWD2 PORT] removed coordination: !CheckSpellState(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),HOPELESSNESS)
// [IWD2 PORT] removed coordination: !CheckSpellState(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),HELD)
// [IWD2 PORT] removed coordination: !CheckSpellState(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),ENTANGLE)
// [IWD2 PORT] removed coordination: !CheckSpellState(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),WEB)
// [IWD2 PORT] removed coordination: !StateCheck(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),STATE_CHARMED)
// [IWD2 PORT] removed coordination: !StateCheck(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),STATE_CONFUSED)
// [IWD2 PORT] removed coordination: !StateCheck(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),STATE_SLEEPING)
// [IWD2 PORT] removed coordination: !StateCheck(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),STATE_DISABLED)
// [IWD2 PORT] removed coordination: !StateCheck(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// [IWD2 PORT] removed coordination: // 	!StateCheck(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])),STATE_NOT_TARGETABLE)

// [IWD2 PORT] removed coordination: See(LastAttackerOf(NearestMyGroupOfType([ALLY.0.0.MAGE_ALL.0.0.0])))
// THEN
// RESPONSE #100
// FloatMessage(Myself,47684) // Shout Help
// Continue()
// END

// Help hurt allies if their attacker is not disabled
IF
	ActionListEmpty()

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	HPPercentLT(MostDamagedOf(Myself),80)
	HPPercentGT(LastAttackerOf(MostDamagedOf(Myself)),0)

	!CheckSpellState(LastAttackerOf(MostDamagedOf(Myself)),HOPELESSNESS)
	!CheckSpellState(LastAttackerOf(MostDamagedOf(Myself)),HELD)
	!CheckSpellState(LastAttackerOf(MostDamagedOf(Myself)),ENTANGLE)
	!CheckSpellState(LastAttackerOf(MostDamagedOf(Myself)),WEB)
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_CHARMED)
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_CONFUSED)
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_STUNNED)
	CheckStatLT(LastAttackerOf(MostDamagedOf(Myself)),1,HELD)
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_SLEEPING)
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_CONFUSED)
	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastAttackerOf(MostDamagedOf(Myself)),STATE_NOT_TARGETABLE)

	See(LastAttackerOf(MostDamagedOf(Myself)))
THEN
	RESPONSE #100
		FloatMessage(Myself,47701) // Protecting Ally
		Continue()
END

// Attack Enemy Spellcasters if they are not disabled
IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)

	!CheckSpellState(NearestEnemyOf([0.0.0.MAGE_ALL]),HOPELESSNESS)
	!CheckSpellState(NearestEnemyOf([0.0.0.MAGE_ALL]),HELD)
	!CheckSpellState(NearestEnemyOf([0.0.0.MAGE_ALL]),ENTANGLE)
	!CheckSpellState(NearestEnemyOf([0.0.0.MAGE_ALL]),WEB)
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_CHARMED)
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf([0.0.0.MAGE_ALL]),1,HELD)
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf([0.0.0.MAGE_ALL]),STATE_NOT_TARGETABLE)

	See(NearestEnemyOf([0.0.0.MAGE_ALL]))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103270) // Attacking Spellcasters
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))

	HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)

	!CheckSpellState(NearestEnemyOf([0.0.0.CLERIC_ALL]),HOPELESSNESS)
	!CheckSpellState(NearestEnemyOf([0.0.0.CLERIC_ALL]),HELD)
	!CheckSpellState(NearestEnemyOf([0.0.0.CLERIC_ALL]),ENTANGLE)
	!CheckSpellState(NearestEnemyOf([0.0.0.CLERIC_ALL]),WEB)
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_CHARMED)
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf([0.0.0.CLERIC_ALL]),1,HELD)
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf([0.0.0.CLERIC_ALL]),STATE_NOT_TARGETABLE)

	See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103270) // Attacking Spellcasters
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))

	HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)

	!CheckSpellState(NearestEnemyOf([0.0.0.DRUID_ALL]),HOPELESSNESS)
	!CheckSpellState(NearestEnemyOf([0.0.0.DRUID_ALL]),HELD)
	!CheckSpellState(NearestEnemyOf([0.0.0.DRUID_ALL]),ENTANGLE)
	!CheckSpellState(NearestEnemyOf([0.0.0.DRUID_ALL]),WEB)
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_CHARMED)
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf([0.0.0.DRUID_ALL]),1,HELD)
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf([0.0.0.DRUID_ALL]),STATE_NOT_TARGETABLE)

	See(NearestEnemyOf([0.0.0.DRUID_ALL]))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103270) // Attacking Spellcasters
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))

	HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)

	!CheckSpellState(NearestEnemyOf([0.0.0.BARD_ALL]),HOPELESSNESS)
	!CheckSpellState(NearestEnemyOf([0.0.0.BARD_ALL]),HELD)
	!CheckSpellState(NearestEnemyOf([0.0.0.BARD_ALL]),ENTANGLE)
	!CheckSpellState(NearestEnemyOf([0.0.0.BARD_ALL]),WEB)
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_CHARMED)
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf([0.0.0.BARD_ALL]),1,HELD)
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf([0.0.0.BARD_ALL]),STATE_NOT_TARGETABLE)

	See(NearestEnemyOf([0.0.0.BARD_ALL]))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103270) // Attacking Spellcasters
		Continue()
END

// If attacked by an enemy attack them if they are not disabled
IF 
	ActionListEmpty()

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf([ALLY.0.0.MAGE_ALL.0.0.0]),0)
		!See(LastAttackerOf([ALLY.0.0.MAGE_ALL.0.0.0]))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	AttackedBy([ENEMY],DEFAULT)
	!InParty(LastAttackerOf(Myself))
	
	!CheckSpellState(LastAttackerOf(Myself),HOPELESSNESS)
	!CheckSpellState(LastAttackerOf(Myself),HELD)
	!CheckSpellState(LastAttackerOf(Myself),ENTANGLE)
	!CheckSpellState(LastAttackerOf(Myself),WEB)
	!StateCheck(LastAttackerOf(Myself),STATE_CHARMED)
	!StateCheck(LastAttackerOf(Myself),STATE_CONFUSED)
	!StateCheck(LastAttackerOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(LastAttackerOf(Myself),STATE_STUNNED)
	CheckStatLT(LastAttackerOf(Myself),1,HELD)
	!StateCheck(LastAttackerOf(Myself),STATE_SLEEPING)
	!StateCheck(LastAttackerOf(Myself),STATE_CONFUSED)
	!StateCheck(LastAttackerOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastAttackerOf(Myself),STATE_NOT_TARGETABLE)

	See(LastAttackerOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103269) // Attacking My Attacker
		Continue()
END

// Attack weakest enemy that is not disabled
IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	HPPercentLT(NearestEnemyOf(Myself),50)

	!CheckSpellState(NearestEnemyOf(Myself),HOPELESSNESS)
	!CheckSpellState(NearestEnemyOf(Myself),HELD)
	!CheckSpellState(NearestEnemyOf(Myself),ENTANGLE)
	!CheckSpellState(NearestEnemyOf(Myself),WEB)
	!StateCheck(NearestEnemyOf(Myself),STATE_CHARMED)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf(Myself),1,HELD)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

	See(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103268) // Attacking Weakest Enemy
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	// Skip if attacking weakest enemy
	!HPPercentLT(NearestEnemyOf(Myself),50)

	HPPercentLT(SecondNearestEnemyOf(Myself),50)

	!CheckSpellState(SecondNearestEnemyOf(Myself),HOPELESSNESS)
	!CheckSpellState(SecondNearestEnemyOf(Myself),HELD)
	!CheckSpellState(SecondNearestEnemyOf(Myself),ENTANGLE)
	!CheckSpellState(SecondNearestEnemyOf(Myself),WEB)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_CHARMED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(SecondNearestEnemyOf(Myself),1,HELD)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(SecondNearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

	See(SecondNearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103268) // Attacking Weakest Enemy
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	// Skip if attacking weakest enemy
	!HPPercentLT(NearestEnemyOf(Myself),50)
	!HPPercentLT(SecondNearestEnemyOf(Myself),50)

	HPPercentLT(ThirdNearestEnemyOf(Myself),50)
	
	!CheckSpellState(ThirdNearestEnemyOf(Myself),HOPELESSNESS)
	!CheckSpellState(ThirdNearestEnemyOf(Myself),HELD)
	!CheckSpellState(ThirdNearestEnemyOf(Myself),ENTANGLE)
	!CheckSpellState(ThirdNearestEnemyOf(Myself),WEB)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_CHARMED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(ThirdNearestEnemyOf(Myself),1,HELD)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

	See(ThirdNearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103268) // Attacking Weakest Enemy
		Continue()
END

// Attack nearby enemies you can see that are not disabled
IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	// Skip if attacking weakest enemy
	!HPPercentLT(NearestEnemyOf(Myself),50)
	!HPPercentLT(SecondNearestEnemyOf(Myself),50)
	!HPPercentLT(ThirdNearestEnemyOf(Myself),50)

	!CheckSpellState(NearestEnemyOf(Myself),HOPELESSNESS)
	!CheckSpellState(NearestEnemyOf(Myself),HELD)
	!CheckSpellState(NearestEnemyOf(Myself),ENTANGLE)
	!CheckSpellState(NearestEnemyOf(Myself),WEB)
	!StateCheck(NearestEnemyOf(Myself),STATE_CHARMED)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(NearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(NearestEnemyOf(Myself),1,HELD)
	!StateCheck(NearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(NearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(NearestEnemyOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(NearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

	See(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103267) // Attacking Nearby Enemies
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	// Skip if attacking weakest enemy
	!HPPercentLT(NearestEnemyOf(Myself),50)
	!HPPercentLT(SecondNearestEnemyOf(Myself),50)
	!HPPercentLT(ThirdNearestEnemyOf(Myself),50)

	!CheckSpellState(SecondNearestEnemyOf(Myself),HOPELESSNESS)
	!CheckSpellState(SecondNearestEnemyOf(Myself),HELD)
	!CheckSpellState(SecondNearestEnemyOf(Myself),ENTANGLE)
	!CheckSpellState(SecondNearestEnemyOf(Myself),WEB)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_CHARMED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(SecondNearestEnemyOf(Myself),1,HELD)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(SecondNearestEnemyOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(SecondNearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

	See(SecondNearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103267) // Attacking Nearby Enemies
		Continue()
END

IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	// Skip if attacking weakest enemy
	!HPPercentLT(NearestEnemyOf(Myself),50)
	!HPPercentLT(SecondNearestEnemyOf(Myself),50)
	!HPPercentLT(ThirdNearestEnemyOf(Myself),50)

	!CheckSpellState(ThirdNearestEnemyOf(Myself),HOPELESSNESS)
	!CheckSpellState(ThirdNearestEnemyOf(Myself),HELD)
	!CheckSpellState(ThirdNearestEnemyOf(Myself),ENTANGLE)
	!CheckSpellState(ThirdNearestEnemyOf(Myself),WEB)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_CHARMED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLEEPING)
	// [IWD2 PORT] STATE_DISABLED not in IWD2; approximate with common disable states
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_STUNNED)
	CheckStatLT(ThirdNearestEnemyOf(Myself),1,HELD)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_SLEEPING)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_CONFUSED)
	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_PANIC)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(ThirdNearestEnemyOf(Myself),STATE_NOT_TARGETABLE)

	See(ThirdNearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103267) // Attacking Nearby Enemies
		Continue()
END

// Attack nearby enemies you can see
IF
	ActionListEmpty()

	// Skip if helping hurt allies
	OR(2)
		!HPPercentLT(MostDamagedOf(Myself),80)
		!See(LastAttackerOf(MostDamagedOf(Myself)))

	// Skip if protecting wizard
	OR(2)
		!HPPercentGT(LastAttackerOf(Player1),0)
		!See(LastAttackerOf(Player1))

	// Skip if attacking spellcaster
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.MAGE_ALL]),0)
		!See(NearestEnemyOf([0.0.0.MAGE_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.CLERIC_ALL]),0)
		!See(NearestEnemyOf([0.0.0.CLERIC_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.DRUID_ALL]),0)
		!See(NearestEnemyOf([0.0.0.DRUID_ALL]))
	OR(2)
		!HPPercentGT(NearestEnemyOf([0.0.0.BARD_ALL]),0)
		!See(NearestEnemyOf([0.0.0.BARD_ALL]))

	// Skip if attacking my attacker
	!AttackedBy([ENEMY],DEFAULT)

	// Skip if attacking weakest enemy
	!HPPercentLT(NearestEnemyOf(Myself),50)
	!HPPercentLT(SecondNearestEnemyOf(Myself),50)
	!HPPercentLT(ThirdNearestEnemyOf(Myself),50)

	See(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
		//FloatMessage(Myself,103267) // Attacking Nearby Enemies
		Continue()
END

//////////////////////////////////////////////////////////////////////////////////// Berserker Rage

//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(BERSERKER_RAGE)
	//!StateCheck(Myself,STATE_BERSERK)
	//HPPercentGT(NearestEnemyOf(Myself),0)
	//!InParty(LastSeenBy(Myself))
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		// Spell(Myself,BERSERKER_RAGE)
//END

////////////////////////////////////////////////////////////////////////////////////// Offensive Spells On Target You Can See

// Level 7 - Alteration (8)
//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(WIZARD_SPHERE_OF_CHAOS)
	//HPPercentGT(NearestEnemyOf(Myself),0)
//
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),7)
//
	//!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	//!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
//
	//CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
//
	//OR(2)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
		//CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
		//CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
		//CheckStatLT(LastSeenBy(Myself),10,THAC0)
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	//!InParty(LastSeenBy(Myself))
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,47688) // Casting Spell
		// Spell(LastSeenBy(Myself),WIZARD_SPHERE_OF_CHAOS)
//END

// Level 10
//IF
	//ActionListEmpty()
	//OR(2)
		//CheckStat(Myself,1,AURACLEANSING)
		//!GlobalTimerNotExpired("castnattack","LOCALS")
	// HaveSpell(WIZARD_DRAGONS_BREATH)
	//HPPercentGT(NearestEnemyOf(Myself),0)
//
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),10)
//
	//!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	//!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)
//
	//CheckStatGT(LastSeenBy(Myself),50,RESISTMAGIC)
//
	//OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
		//CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
		//CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
		//CheckStatLT(LastSeenBy(Myself),10,THAC0)
//
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	//!StateCheck(Myself,STATE_SILENCED)
	//CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	//!InParty(LastSeenBy(Myself))
//THEN
	//RESPONSE #100
        //SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,47688) // Casting Spell
		// Spell(LastSeenBy(Myself),WIZARD_DRAGONS_BREATH)
//END

// Level 8 - Necromancy (7)
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_ABI_DALZIMS_HORRID_WILTING)
	HPPercentGT(NearestEnemyOf(Myself),0)

// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),7,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),8)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

	OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
// [IWD2 PORT] disabled: ARMORCLASS causes runtime assertion in IWD2
// CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
		CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
		CheckStatLT(LastSeenBy(Myself),10,THAC0)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(LastSeenBy(Myself),WIZARD_ABI_DALZIMS_HORRID_WILTING)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_DISINTEGRATE)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),8,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)

// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),6)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		Spell(LastSeenBy(Myself),WIZARD_DISINTEGRATE)
END

IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MORDENKAINENS_FORCE_MISSILES)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)

// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),4)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		Spell(LastSeenBy(Myself),WIZARD_MORDENKAINENS_FORCE_MISSILES)
END

// Level 6 - Evocation
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_CHAIN_LIGHTNING)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),6)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),49,RESISTMAGIC)
	CheckStatLT(LastSeenBy(Myself),49,RESISTELECTRICITY)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(LastSeenBy(Myself),WIZARD_CHAIN_LIGHTNING)
END

// Level 3 - Evocation
IF
	Class(Myself,MAGE_ALL)
	HaveSpell(WIZARD_FIREBALL)
	!Range(TenthNearestEnemyOf(Myself),17)
	// !StateCheck(TenthNearestEnemyOf(Myself),STATE_REALLY_DEAD)

	// !TriggerOverride(TenthNearestEnemyOf(Myself),Range(NearestEnemyOf(Myself),22))
	See(TenthNearestEnemyOf(Myself)) // Target the fireball target
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		SetGlobalTimer("castingfireball","LOCALS",6) // Starting fireball
		//FloatMessage(Myself,103266) // Spell: Fireball
		Spell(TenthNearestEnemyOf(Myself),WIZARD_FIREBALL)
END

// Level 1 - Evocation
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MAGIC_MISSILE)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)

// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),1)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103264) // Spell: Magic Missile
		Spell(LastSeenBy(Myself),WIZARD_MAGIC_MISSILE)
END

// Level 1 - Evocation
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_CHROMATIC_ORB)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),1)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103265) // Spell: Chromatic Orb
		Spell(LastSeenBy(Myself),WIZARD_CHROMATIC_ORB)
END

// Level 3 - Conjuration
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_FLAME_ARROW)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),2,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING) 
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTFIRE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: stat not in STATS.IDS
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSSPELL)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103263) // Spell: Flame Arrow
		Spell(LastSeenBy(Myself),WIZARD_FLAME_ARROW)
END

// Level 2 - Conjuration
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_MELFS_ACID_ARROW)
	HPPercentGT(NearestEnemyOf(Myself),0)

// 	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),2,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING) 
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),2)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTACID)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,103262) // Spell: Melf Acid Arrow
		Spell(LastSeenBy(Myself),WIZARD_MELFS_ACID_ARROW)
END

// Level 2 - Evocation
IF
	ActionListEmpty()
	OR(2)
		CheckStat(Myself,1,AURACLEANSING)
		!GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(WIZARD_AGANNAZAR_SCORCHER)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),2)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTFIRE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103261) // Spell: Agannazar Scorcher
		Spell(LastSeenBy(Myself),WIZARD_AGANNAZAR_SCORCHER)
END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_SUNSCORCH)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),1)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103260) // Spell: Holy Smite
		Spell(LastSeenBy(Myself),CLERIC_SUNSCORCH)
END

// Level 3 - Necromancy
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_HOLY_SMITE)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),7,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103260) // Spell: Holy Smite
		Spell(LastSeenBy(Myself),CLERIC_HOLY_SMITE)
END

// Level 3 - Alteration
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HaveSpell(CLERIC_CALL_LIGHTNING)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),8,WIZARD_SPELL_IMMUNITY) 
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),3)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREPRIEST)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		FloatMessage(Myself,47688) // Casting Spell
		Spell(LastSeenBy(Myself),CLERIC_CALL_LIGHTNING)
END

//////////////////////////////////////////////////////////////////// Offensive Wands On Targets You Can See
//IF
//    ActionListEmpty()
  //  !GlobalTimerNotExpired("castnattack","LOCALS")
//	Class(Myself,MAGE_ALL)
//	HPPercentGT(NearestEnemyOf(Myself),0)
//	HasItem("wand06",Myself)
//	CheckStatGT(LastSeenBy(Myself),5,SAVEVSWANDS)
//	OR(4)
//		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
//		CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
//		CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
//		CheckStatLT(LastSeenBy(Myself),10,THAC0)
//	!InParty(LastSeenBy(Myself))
//THEN
//	RESPONSE #100
//        SetGlobalTimer("castnattack","LOCALS",6)
//		//FloatMessage(Myself,103257) // Wand: Frost
//		UseItem("wand06",LastSeenBy(Myself))
//END

IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,MAGE_ALL)
	HPPercentGT(NearestEnemyOf(Myself),0)
	HasItem("wand03",Myself)
// [IWD2 PORT] commented: SAVEVSWANDS not in IWD2 STATS.IDS (no direct replacement)
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSWANDS)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103256) // Wand: Magic Missile
		UseItem("wand03",LastSeenBy(Myself))
END

IF
  	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	Class(Myself,CLERIC_ALL)
	HPPercentGT(NearestEnemyOf(Myself),0)
	HasItem("wand11",Myself)
// [IWD2 PORT] commented: SAVEVSWANDS not in IWD2 STATS.IDS (no direct replacement)
// 	CheckStatGT(LastSeenBy(Myself),5,SAVEVSWANDS)
	OR(3)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
// [IWD2 PORT] disabled: ARMORCLASS causes runtime assertion in IWD2
// CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
		CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
		CheckStatLT(LastSeenBy(Myself),10,THAC0)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103255) // Wand: Heavens
		UseItem("wand11",LastSeenBy(Myself))
END

// IF
// 	Class(Myself,MAGE_ALL)
// 	HasItem("wand05",Myself)
// 	!Range(TenthNearestEnemyOf(Myself),17)
	// !StateCheck(TenthNearestEnemyOf(Myself),STATE_REALLY_DEAD)

	// !TriggerOverride(TenthNearestEnemyOf(Myself),Range(NearestEnemyOf(Myself),22))
// 	See(TenthNearestEnemyOf(Myself)) // Target the fireball target
// 	!InParty(LastSeenBy(Myself))
// THEN
// 	RESPONSE #100
        // SetGlobalTimer("castnattack","LOCALS",6)
// 		SetGlobalTimer("castingfireball","LOCALS",6) // Starting fireball
		//FloatMessage(Myself,103259) // Wand: Fire
// 		XEquipItem("wand05",Myself,SLOT_MISC0,EQUIP)
// 		UseItemSlotAbility(TenthNearestEnemyOf(Myself),SLOT_MISC0,0)
// END

//IF
//	Class(Myself,MAGE_ALL)
//	HasItem("wand05",Myself)
	//!InLine(LastSeenBy(Myself),Player1)
	//!InLine(LastSeenBy(Myself),Player2)
	//!InLine(LastSeenBy(Myself),Player3)
	//!InLine(LastSeenBy(Myself),Player4)
	//!InLine(LastSeenBy(Myself),Player5)
	//!InLine(LastSeenBy(Myself),Player6)

//	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
//	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY) 
//	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)
//	!ImmuneToSpellLevel(LastSeenBy(Myself),2)

//	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
//	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
//	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

//	CheckStatLT(LastSeenBy(Myself),75,RESISTFIRE)
//	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

//	OR(4)
//		CheckStatLT(LastSeenBy(Myself),5,SAVEVSSPELL)
//		CheckStatLT(LastSeenBy(Myself),0,ARMORCLASS)
//		CheckStatGT(LastSeenBy(Myself),75,MAXHITPOINTS)
//		CheckStatLT(LastSeenBy(Myself),10,THAC0)
//	!InParty(LastSeenBy(Myself))
//THEN
//	RESPONSE #100
//        SetGlobalTimer("castnattack","LOCALS",6)
//		//FloatMessage(Myself,71433) // Wand: Fire
//		XEquipItem("wand05",Myself,SLOT_MISC0,EQUIP)
//		UseItemSlotAbility(LastSeenBy(Myself),SLOT_MISC0,1)
//END

//IF
//  ActionListEmpty()
//    !GlobalTimerNotExpired("castnattack","LOCALS")
//	Class(Myself,MAGE_ALL)
//	HasItem("wand10",Myself)
//	See(NearestEnemyOf(Myself))
//THEN
//	RESPONSE #100
//        SetGlobalTimer("castnattack","LOCALS",6)
//		//FloatMessage(Myself,71436) // Wand: Monster Summoning
//		UseItem("wand10",LastSeenBy(Myself))
//END

//IF
//  ActionListEmpty()
//    !GlobalTimerNotExpired("castnattack","LOCALS")
//	Class(Myself,MAGE_ALL)
//	HasItem("wand18",Myself)
//	See(NearestEnemyOf(Myself))
//THEN
//	RESPONSE #100
//        SetGlobalTimer("castnattack","LOCALS",6)
//		//FloatMessage(Myself,103258) // Wand: Spell Striking
//		UseItem("wand18",LastSeenBy(Myself))
//END

//////////////////////////////////////////////////////////////////// Scrolls: Offensive Spells

// Level 1 - Evocation
IF
	ActionListEmpty()
    !GlobalTimerNotExpired("castnattack","LOCALS")
	HasItem("SCRL77",Myself)
	HPPercentGT(NearestEnemyOf(Myself),0)

	!CheckStat(LastSeenBy(Myself),1,MINORGLOBE)
// [IWD2 PORT] commented: stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),6,WIZARD_SPELL_IMMUNITY)
// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStat(LastSeenBy(Myself),1,WIZARD_SPELL_TURNING)

// [IWD2 PORT] commented: ImmuneToSpellLevel() not in TRIGGER.IDS
// 	!ImmuneToSpellLevel(LastSeenBy(Myself),1)

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)

// [IWD2 PORT] commented: spell stat not in STATS.IDS
// 	!CheckStatGT(Myself,0,CLERIC_INSECT_PLAGUE)
	!StateCheck(Myself,STATE_SILENCED)
	CheckStatLT(Myself,50,SPELLFAILUREMAGE)
	!InParty(LastSeenBy(Myself))
THEN
	RESPONSE #100
        SetGlobalTimer("castnattack","LOCALS",6)
		//FloatMessage(Myself,103264) // Spell: Magic Missile
		UseItem("SCRL77",Myself)
END

//////////////////////////////////////////////////////////////////// Change Melee Weapon If Not Effective

//IF
//	ActionListEmpty()
//	//!GlobalTimerNotExpired("checkweapon0","LOCALS")
//	!IsWeaponRanged(Myself)
//	HPPercentGT(LastSeenBy(Myself),0)
//	!CheckWeaponCanDamageV2(LastSeenBy(Myself),BOTH)
//THEN
//	RESPONSE #100
//		//FloatMessage(Myself,71441) // Changing Weapon
//		SelectWeaponAbility(SLOT_WEAPON0,0)
//		//SetGlobalTimer("checkweapon0","LOCALS",20)
//END

//IF
//	ActionListEmpty()
//	//!GlobalTimerNotExpired("checkweapon1","LOCALS")
//	!IsWeaponRanged(Myself)
//	HPPercentGT(LastSeenBy(Myself),0)
//	!WeaponCanDamage(LastSeenBy(Myself),BOTH)
//THEN
//	RESPONSE #100
//		//FloatMessage(Myself,71441) // Changing Weapon
//		SelectWeaponAbility(SLOT_WEAPON1,0)
//		//SetGlobalTimer("checkweapon1","LOCALS",20)
//END

//IF
//	ActionListEmpty()
//	!GlobalTimerNotExpired("checkweapon2","LOCALS")
//	!IsWeaponRanged(Myself)
//	HPPercentGT(LastSeenBy(Myself),0)
//	!WeaponCanDamage(LastSeenBy(Myself),BOTH)
//THEN
//	RESPONSE #100
//		//FloatMessage(Myself,71441) // Changing Weapon
//		SelectWeaponAbility(SLOT_WEAPON2,0)
//		SetGlobalTimer("checkweapon2","LOCALS",20)
//END

//IF
//	ActionListEmpty()
//	!GlobalTimerNotExpired("checkweapon3","LOCALS")
//	!IsWeaponRanged(Myself)
//	HPPercentGT(LastSeenBy(Myself),0)
//	!WeaponCanDamage(LastSeenBy(Myself),BOTH)
//THEN
//	RESPONSE #100
//		//FloatMessage(Myself,71441) // Changing Weapon
//		SelectWeaponAbility(SLOT_WEAPON3,0)
//		SetGlobalTimer("checkweapon3","LOCALS",20)
//END

/////////////////////////////////////////////////////////// Equip Arrows If Out Of Ammo

//IF
//	!HasItem("AROW01",Myself)
//THEN
//	RESPONSE #100
///		//FloatMessage(Myself,10)
//END

// IF
// 	!HasItem("AROW01",Myself) // passing for both
// 	HasItemCategory(Myself,BOW,FALSE) // passing for both when false, neither when true
// 	HasItem("AROW01",Myself) // Arrow
// THEN
// 	RESPONSE #100
		//FloatMessage(Myself,103254) // Equipping Arrows
// 		XEquipItem("AROW01",Myself,SLOT_AMMO0,EQUIP)
// 		Continue()
// END

//	HasItem("AROW02",Myself) // Arrow + 1
//	HasItem("AROW03",Myself) // Arrow Of Slaying
//	HasItem("AROW04",Myself) // Acid Arrow + 1
//	HasItem("AROW05",Myself) // Arrow Of Biting
//	HasItem("AROW06",Myself) // Arrow Of Detonation
//	HasItem("AROW07",Myself) // Arrow Of Dispelling
//	HasItem("AROW08",Myself) // Arrow Of Fire + 2
//	HasItem("AROW09",Myself) // Arrow Of Ice
//	HasItem("AROW10",Myself) // Arrow Of Piercing + 1
//	HasItem("AROW11",Myself) // Arrow + 2
//	HasItem("AROW12",Myself) // Arrow Of Biting
//	HasItem("AROW14",Myself) // Poisoned Arrow
//	HasItem("AROW15",Myself) // Arrow Of Ice
//	HasItem("AROW16",Myself) // Arrow Of Ice
//	HasItem("ANGAROW",Myself) // Arrow Of Fire + 2
//	HasItem("AROW1A",Myself) // Arrow + 2
//	HasItem("AROWKC",Myself) // Arrow Of Fire + 2
//	HasItem("ARROPHE2",Myself) // Arrow Of Fire + 2
//	HasItem("bdarow01",Myself) // Arrow Of Antimagic + 1
//	HasItem("bdarow03",Myself) // Flaming Arrow
//	HasItem("bdarow04",Myself) // Arrow + 3
//	HasItem("CUTAROW1",Myself) // Arrow Of Ice
//	HasItem("IAROW01",Myself) // Arrow
//	HasItem("QUIV01",Myself) // Arrow

//////////////////////////////////////////////////////// Share Ammo

// IF
// 	!HasItem("AROW01",Myself) // Arrow
// 	!HasItem("AROW02",Myself) // Arrow + 1
// 	!HasItem("AROW03",Myself) // Arrow Of Slaying
// 	!HasItem("AROW04",Myself) // Acid Arrow + 1
// 	!HasItem("AROW05",Myself) // Arrow Of Biting
// 	!HasItem("AROW06",Myself) // Arrow Of Detonation
// 	!HasItem("AROW07",Myself) // Arrow Of Dispelling
// 	!HasItem("AROW08",Myself) // Arrow Of Fire + 2
// 	!HasItem("AROW09",Myself) // Arrow Of Ice
// 	!HasItem("AROW10",Myself) // Arrow Of Piercing + 1
// 	!HasItem("AROW11",Myself) // Arrow + 2
// 	!HasItem("AROW12",Myself) // Arrow Of Biting
// 	!HasItem("AROW15",Myself) // Arrow Of Ice
// 	!HasItem("AROW16",Myself) // Arrow Of Ice
//	!HasItem("bdarow01",Myself) // Arrow Of Antimagic + 1
//	!HasItem("bdarow03",Myself) // Flaming Arrow
//	!HasItem("bdarow04",Myself) // Arrow + 3
//	!HasItem("CUTAROW1",Myself) // Arrow Of Ice
// 	HasItemCategory(Myself,BOW,FALSE)
// THEN
    // RESPONSE #100
		//FloatMessage(Myself,103253) // Help: Need Arrows
        // Shout(NEED_ARROWS) // Shout for help
// 		Continue()
// END

// IF
    // Heard([ANYONE],NEED_ARROWS) // If someone shouted for help
    // !HasItem("AROW01",LastHeardBy(Myself))
// 	HasItem("AROW01",Myself)
// THEN
    // RESPONSE #100
		//FloatMessage(Myself,103252) // Giving Arrows
        // GiveItem("AROW01",LastHeardBy(Myself))
// 		Continue()
// END

/////////////////////////////////////////////////////////// Change Ranged Ammo If Not Effective

// IF
// 	ActionListEmpty()
// 	IsWeaponRanged(Myself)
// 	HPPercentGT(NearestEnemyOf(Myself),0)
// 	!WeaponEffectiveVs(NearestEnemyOf(Myself),MAINHAND)
	//!WeaponCanDamage(NearestEnemyOf(Myself),MAINHAND)
// THEN
// 	RESPONSE #100
		//FloatMessage(Myself,103251) // Changing Weapon
// 		SelectWeaponAbility(SLOT_AMMO0,0)
// 		Continue()
// END

// IF
// 	ActionListEmpty()
// 	IsWeaponRanged(Myself)
// 	HPPercentGT(NearestEnemyOf(Myself),0)
// 	!WeaponEffectiveVs(NearestEnemyOf(Myself),MAINHAND)
	//!WeaponCanDamage(NearestEnemyOf(Myself),MAINHAND)
// THEN
// 	RESPONSE #100
		//FloatMessage(Myself,103251) // Changing Weapon
// 		SelectWeaponAbility(SLOT_AMMO1,0)
// 		Continue()
// END

// IF
// 	ActionListEmpty()
// 	IsWeaponRanged(Myself)
// 	HPPercentGT(NearestEnemyOf(Myself),0)
// 	!WeaponEffectiveVs(NearestEnemyOf(Myself),MAINHAND)
	//!WeaponCanDamage(NearestEnemyOf(Myself),MAINHAND)
// THEN
// 	RESPONSE #100
		//FloatMessage(Myself,103251) // Changing Weapon
// 		SelectWeaponAbility(SLOT_AMMO2,0)
// 		Continue()
// END

// IF
// 	ActionListEmpty()
// 	IsWeaponRanged(Myself)
// 	HPPercentGT(NearestEnemyOf(Myself),0)
// 	!WeaponEffectiveVs(NearestEnemyOf(Myself),MAINHAND)
	//!WeaponCanDamage(NearestEnemyOf(Myself),MAINHAND)
// THEN
// 	RESPONSE #100
		//FloatMessage(Myself,103251) // Changing Weapon
// 		SelectWeaponAbility(SLOT_AMMO3,0)
// 		Continue()
// END

//////// Bard Luck Song

IF
    ActionListEmpty()
    CheckStatGT(Myself,5,CLASSLEVELBARD)
    CheckStatLT(Myself,20,CLASSLEVELBARD)
    !ModalState(Myself,BATTLESONG)
THEN
    RESPONSE #100
        PlayBardSong(TYMORAS_MELODY)
END


/////////////////////////////////////////////////////////// Use Melfs Minute Meteors If Equipped

IF
	ActionListEmpty()
	HasItem("MELFMET",Myself)
	HPPercentGT(NearestEnemyOf(Myself),0)
	!InParty(LastSeenBy(Myself))

	!StateCheck(LastSeenBy(Myself),STATE_INVISIBLE)
	!StateCheck(LastSeenBy(Myself),STATE_IMPROVEDINVISIBILITY)
// [IWD2 PORT] commented: STATE_NOT_TARGETABLE not in STATE.IDS
// 	!StateCheck(LastSeenBy(Myself),STATE_NOT_TARGETABLE)

	CheckStatLT(LastSeenBy(Myself),75,RESISTFIRE)
	CheckStatLT(LastSeenBy(Myself),75,RESISTMAGIC)
THEN
	RESPONSE #100
		//FloatMessage(Myself,103250) // Melfs Minute Meteors
		AttackOneRound(LastSeenBy(Myself))
END

///////////////////////////////////////////////////////// Ranged Non-Spell Attack
// Attack enemies that have been targeted
IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(NearestEnemyOf(Myself),0)
	HPPercentGT(LastSeenBy(Myself),0)
	!InParty(LastSeenBy(Myself))
	//!Specifics(LastSeenBy(Myself),ALLIES)
THEN
	RESPONSE #100
		FloatMessage(Myself,47681) // Ranged Attack
		SetGlobal("usingNormalAttack","LOCALS",1)
		AttackOneRound(LastSeenBy(Myself))
END

// If cant see nearby enemy go and attack the nearest
IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(NearestEnemyOf(Myself),0)
	!InParty(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
		FloatMessage(Myself,47681) // Ranged Attack
		SetGlobal("usingNormalAttack","LOCALS",1)
		AttackOneRound(NearestEnemyOf(Myself))
END

// If no nearby enemies, attack attackers of allies
IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(LastAttackerOf(Player1),0)
	!InParty(LastAttackerOf(Player1))
THEN
	RESPONSE #100
		AttackOneRound(LastAttackerOf(Player1))
		SetGlobal("usingNormalAttack","LOCALS",1)
		FloatMessage(Myself,47701) // Protecting Ally
END

IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(LastAttackerOf(Player2),0)
	!InParty(LastAttackerOf(Player2))
THEN
	RESPONSE #100
		AttackOneRound(LastAttackerOf(Player2))
		SetGlobal("usingNormalAttack","LOCALS",1)
		FloatMessage(Myself,47701) // Protecting Ally
END

IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(LastAttackerOf(Player3),0)
	!InParty(LastAttackerOf(Player3))
THEN
	RESPONSE #100
		AttackOneRound(LastAttackerOf(Player3))
		SetGlobal("usingNormalAttack","LOCALS",1)
		FloatMessage(Myself,47701) // Protecting Ally
END

IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(LastAttackerOf(Player4),0)
	!InParty(LastAttackerOf(Player4))
THEN
	RESPONSE #100
		AttackOneRound(LastAttackerOf(Player4))
		SetGlobal("usingNormalAttack","LOCALS",1)
		FloatMessage(Myself,47701) // Protecting Ally
END

IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(LastAttackerOf(Player5),0)
	!InParty(LastAttackerOf(Player5))
THEN
	RESPONSE #100
		AttackOneRound(LastAttackerOf(Player5))
		SetGlobal("usingNormalAttack","LOCALS",1)
		FloatMessage(Myself,47701) // Protecting Ally
END

IF
	ActionListEmpty()
	IsWeaponRanged(Myself)
	HPPercentGT(LastAttackerOf(Player6),0)
	!InParty(LastAttackerOf(Player6))
THEN
	RESPONSE #100
		AttackOneRound(LastAttackerOf(Player6))
		SetGlobal("usingNormalAttack","LOCALS",1)
		FloatMessage(Myself,47701) // Protecting Ally
END

// Melee Attacks
IF
	ActionListEmpty()
	!IsWeaponRanged(Myself)
	HPPercentGT(NearestEnemyOf(Myself),0)
	HPPercentGT(LastSeenBy(Myself),0)
	!InParty(LastSeenBy(Myself))
	//!Specifics(LastSeenBy(Myself),ALLIES)
THEN
	RESPONSE #100
		// FloatMessage(Myself,47681) // Ranged Attack
		SetGlobal("usingNormalAttack","LOCALS",1)
		AttackOneRound(LastSeenBy(Myself))
END

// If cant see nearby enemy go and attack the nearest
IF
	ActionListEmpty()
	!IsWeaponRanged(Myself)
	HPPercentGT(NearestEnemyOf(Myself),0)
	!InParty(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
		// FloatMessage(Myself,47681) // Ranged Attack
		SetGlobal("usingNormalAttack","LOCALS",1)
		AttackOneRound(NearestEnemyOf(Myself))
END

////////////////////////////////////////////////////////// Wizard Use Healing If No Enemies

/////////////////////////////////////////////////////////// Find traps
// [IWD2 PORT] block commented out: contains DETECTTRAPS (not in OBJECT.IDS)
// IF
// 	ActionListEmpty()
// 	Class(Myself,THIEF_ALL)
// 	!ModalState(DETECTTRAPS)
// THEN
// 	RESPONSE #100
// 		//FloatMessage(Myself,103248) // Finding Traps
// 		FindTraps()
// END

////////////////////////////////////////////////////////// Randomly turn around, makes them look more alive
//IF
//	ActionListEmpty()
//THEN
//	RESPONSE #100
//		//FloatMessage(Myself,1539)
//		RandomTurn()
//		ClearAllActions()
//END

//IF
//
//THEN
//	RESPONSE #25
//		MoveToOffset([1.1])
//	RESPONSE #25
//		MoveToOffset([1.-1])
//	RESPONSE #25
//		MoveToOffset([-1.1])
//	RESPONSE #25
//		MoveToOffset([-1.-1])
//END
